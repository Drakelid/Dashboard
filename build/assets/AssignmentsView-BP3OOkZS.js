import{s as P,d as le,c as m,l as ae,a as r,b as x,e as s,t as o,L as g,u as p,F as $,x as C,R as Re,y as b,o as l,r as S,m as qe,S as J,i as Ie,K as We,G as ne,M as v,A as He,a1 as Ue,j as Ge,a2 as Je,Z as w,z as Ke,T as Qe,w as D,a3 as Xe,n as Ze}from"./index-N32n9u2U.js";import{g as Ye,S as et,C as tt}from"./geocode-wgqRZa_V.js";import{X as st}from"./x-CytkTru8.js";import{C as it,T as nt}from"./triangle-alert-CCp89XeY.js";import{C as K,M as ot,P as lt}from"./package-D5iwvjsu.js";import{M as oe,N as at}from"./navigation-COcLJgcY.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=P("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=P("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=P("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=P("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=P("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),gt={key:0,class:"fixed inset-0 z-[1200]"},mt={class:"absolute inset-0 flex items-center justify-center p-4"},ft={class:"w-full max-w-xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/10 overflow-hidden"},vt={class:"px-4 py-3 border-b flex items-center justify-between"},xt={key:0,class:"text-xs text-gray-500"},ht={class:"max-h-[60vh] overflow-y-auto divide-y"},bt={key:0,class:"px-4 py-6 text-sm text-gray-500"},_t={class:"flex items-center justify-between"},yt={class:"text-sm font-semibold"},kt={class:"grid grid-cols-2 gap-3 text-xs text-gray-600"},wt={class:"capitalize"},$t={class:"text-xs text-gray-600"},Ct={class:"list-disc ml-4 space-y-0.5"},Lt={key:0},St={key:1},At={key:2},Mt={class:"px-4 py-3 border-t flex items-center justify-end gap-2"},Tt=le({__name:"AssignmentPackageModal",props:{open:{type:Boolean},packages:{},assignmentId:{}},emits:["close","scan"],setup(Q,{emit:O}){const j=Q,L=O,B=m(()=>j.packages||[]),A=m(()=>j.assignmentId);function V(d){if(!d.weight)return"-";const a=d.weight_unit||"kg";return`${d.weight} ${a}`}function M(d){if(!d.length||!d.width||!d.height)return"-";const a=d.dimension_unit||"cm";return`${d.length}x${d.width}x${d.height} ${a}`}function z(d){const a=d.temperature_unit||"C";return`${d.temperature_c} ${a}`}return(d,a)=>(l(),ae(Re,{to:"body"},[d.open?(l(),r("div",gt,[s("div",{class:"absolute inset-0 bg-black/40",onClick:a[0]||(a[0]=c=>L("close"))}),s("div",mt,[s("section",ft,[s("header",vt,[s("div",null,[a[4]||(a[4]=s("h3",{class:"text-lg font-semibold"},"Package Details",-1)),A.value?(l(),r("p",xt,"Assignment #"+o(A.value),1)):x("",!0)]),s("button",{class:"h-8 w-8 rounded-full hover:bg-gray-100 grid place-items-center",onClick:a[1]||(a[1]=c=>L("close")),"aria-label":"Close"},[g(p(st),{class:"w-4 h-4"})])]),s("div",ht,[B.value.length?x("",!0):(l(),r("div",bt,"No package details available.")),(l(!0),r($,null,C(B.value,c=>(l(),r("article",{key:c.id??c.description,class:"px-4 py-3 space-y-2"},[s("div",_t,[s("div",yt,"Package "+o(c.id??"unknown"),1),s("span",{class:b(["text-xs px-2 py-0.5 rounded-full",c.hazardous?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"])},o(c.hazardous?"Hazardous":"Eco"),3)]),s("div",kt,[s("div",null,[a[5]||(a[5]=s("div",{class:"font-medium text-gray-800"},"Description",-1)),s("div",null,o(c.description||"-"),1)]),s("div",null,[a[6]||(a[6]=s("div",{class:"font-medium text-gray-800"},"Weight",-1)),s("div",null,o(V(c)),1)]),s("div",null,[a[7]||(a[7]=s("div",{class:"font-medium text-gray-800"},"Dimensions",-1)),s("div",null,o(M(c)),1)]),s("div",null,[a[8]||(a[8]=s("div",{class:"font-medium text-gray-800"},"Status",-1)),s("div",wt,o((c.delivery_status||"pending").replace(/_/g," ")),1)])]),s("div",$t,[a[9]||(a[9]=s("div",{class:"font-medium text-gray-800 mb-1"},"Handling",-1)),s("ul",Ct,[c.fragile?(l(),r("li",Lt,"Fragile - handle with care")):x("",!0),c.temperature_c?(l(),r("li",St,"Temperature sensitive: "+o(z(c)),1)):x("",!0),!c.fragile&&!c.temperature_c?(l(),r("li",At,"No special handling notes.")):x("",!0)])])]))),128))]),s("footer",Mt,[s("button",{class:"h-9 px-3 text-sm rounded border bg-white hover:bg-gray-50",onClick:a[2]||(a[2]=c=>L("close"))}," Close "),s("button",{class:"h-9 px-3 text-sm rounded bg-blue-600 text-white hover:bg-blue-700",onClick:a[3]||(a[3]=c=>L("scan"))}," Scan & Confirm ")])])])])):x("",!0)]))}}),Nt={class:"space-y-6"},Dt={class:"px-4 md:px-6"},Pt={class:"rounded-xl border bg-white shadow-sm px-4 py-4 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},Ot={class:"space-y-2"},jt={class:"flex flex-wrap items-center gap-3"},Bt={class:"flex flex-wrap items-center gap-4 text-xs text-gray-500"},zt={class:"inline-flex items-center gap-1"},Ft={key:0,class:"inline-flex items-center gap-1"},Et={class:"flex flex-wrap items-center gap-2"},Vt={key:0,class:"px-4 md:px-6"},Rt={class:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800 flex items-start gap-3"},qt={class:"mt-0.5"},It={class:"px-4 md:px-6"},Wt={class:"grid gap-3 md:grid-cols-4"},Ht={class:"text-xs uppercase tracking-wide text-gray-500"},Ut={class:"mt-1 flex items-baseline gap-2"},Gt={class:"text-xl font-semibold text-gray-900"},Jt={class:"text-xs text-gray-500 mt-1"},Kt={class:"px-4 md:px-6"},Qt={class:"rounded-xl border bg-white shadow-sm px-4 py-3 overflow-x-auto"},Xt={class:"flex items-center gap-3 min-w-max"},Zt=["onClick"],Yt={class:"font-medium flex items-center gap-1"},es={class:"text-xs text-gray-500 flex items-center gap-2"},ts={class:"w-full h-1 rounded-full bg-gray-200"},ss={class:"px-4 md:px-6"},is={class:"grid gap-4 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]"},ns={class:"space-y-4"},os={class:"px-4 py-3 border-b flex items-center justify-between"},ls={class:"flex items-center gap-2"},as={class:"text-sm font-semibold text-gray-800"},rs={class:"text-xs text-gray-500"},ds={key:0,class:"px-4 py-6 text-sm text-gray-500"},cs={key:1,class:"divide-y"},us=["onClick"],ps={class:"flex items-start justify-between gap-3"},gs={class:"flex items-center gap-2 text-sm font-semibold text-gray-900"},ms={class:"text-xs text-gray-500"},fs={class:"mt-1 flex items-center gap-3 text-xs text-gray-500"},vs={class:"inline-flex items-center gap-1"},xs={class:"font-medium text-green-700"},hs={class:"flex flex-col items-end gap-1 text-xs text-gray-500"},bs=["onClick"],_s={class:"grid md:grid-cols-2 gap-3 text-xs text-gray-600"},ys={class:"flex items-center gap-2"},ks=["onClick"],ws=["onClick"],$s=["onClick"],Cs=["onClick"],Ls={class:"space-y-4"},Ss={class:"rounded-xl border bg-white shadow-sm overflow-hidden"},As={class:"px-4 py-3 border-b flex items-center justify-between"},Ms={class:"flex items-center gap-2 text-sm font-semibold text-gray-800"},Ts={class:"rounded-xl border bg-white shadow-sm overflow-hidden"},Ns={class:"inline-flex items-center gap-2"},Ds={class:"text-xs text-gray-500"},Ps={key:0,class:"max-h-64 overflow-y-auto divide-y"},Os={class:"flex flex-col"},js={class:"font-medium text-gray-800"},Bs={class:"text-xs text-gray-500"},zs=["onClick"],Fs={class:"rounded-xl border bg-white shadow-sm"},Es={class:"px-4 py-3 border-b flex items-center justify-between"},Vs={class:"px-4 py-3 space-y-3 text-sm"},Rs={class:"mt-1"},qs={class:"font-medium text-gray-900"},Is={class:"text-xs text-gray-500"},Ws={class:"text-xs text-gray-600 mt-1"},Hs={key:0,class:"text-xs text-gray-500"},Ys=le({__name:"AssignmentsView",setup(Q){const{future:O,loading:j,error:L,loadFuture:B,refresh:A}=We(),V=Ze(),M=qe(),z=S(!0),d=S(!0),a=S(!0),c=S("all"),h=S(M.query.focus||null),R=S(!1),X=J({}),q=J({});Ie(()=>{O.value||B().catch(()=>{})}),ne(()=>M.query.focus,e=>{typeof e=="string"&&E(e)});const I=m(()=>L.value||null),W=Be(),re=m(()=>{const e=O.value;return e&&e.length?e:(j.value||I.value,W)}),_=m(()=>re.value.map((e,t)=>we(e,t)));ne(_,e=>{if(!e.length){h.value=null;return}h.value&&e.some(t=>t.id===h.value)||(h.value=e[0].id)},{immediate:!0});const F=m(()=>_.value.find(e=>e.id===h.value)||null),de=m(()=>{const e=[{id:"ready",label:"Ready for pickup",dot:"bg-blue-500",items:[]},{id:"in_transit",label:"In transit",dot:"bg-amber-500",items:[]},{id:"needs_action",label:"Needs attention",dot:"bg-red-500",items:[]}];for(const t of _.value){const i=e.find(n=>n.id===t.status);i&&i.items.push(t)}return e}),ce=m(()=>_.value.map((e,t,i)=>({id:e.id,label:e.dropoffLabel,time:e.timeLabel,distance:e.distanceLabel,progress:i.length<=1?100:Math.round(t/(i.length-1)*100)}))),T=m(()=>_.value.map(e=>({id:e.id,lat:e.coordinates.lat,lng:e.coordinates.lng,label:`${e.dropoffLabel}
${e.timeLabel}`,kind:e.status==="needs_action"?"nearby":"job",color:e.status==="needs_action"?"#f97316":e.status==="in_transit"?"#2563eb":"#16a34a"}))),ue=m(()=>{const e=T.value.find(t=>t.id===h.value);return e?{lat:e.lat,lng:e.lng}:T.value[0]?{lat:T.value[0].lat,lng:T.value[0].lng}:{lat:59.9139,lng:10.7522}}),pe=m(()=>{const e=_.value[0];return e?e.timeLabel:"No assignments queued"}),N=J(new Map),H=m(()=>{const e=[];for(const t of _.value)for(const i of t.tasks){N.get(t.id)||N.set(t.id,{});const n=N.get(t.id)[i.id]||!1;e.push({id:i.id,label:i.label,dueLabel:i.dueLabel,assignmentId:t.id,assignmentLabel:t.dropoffLabel,completed:n})}return e}),ge=m(()=>H.value.filter(e=>e.completed).length),Z=m(()=>{const e=[];for(const t of _.value)e.push(...t.timeline);return e.sort((t,i)=>t.sortOrder-i.sortOrder)}),Y=m(()=>c.value==="all"?Z.value:Z.value.filter(e=>e.status===c.value)),me=m(()=>{const e=_.value,t=e.length,i=e.filter(f=>f.status==="ready").length,n=e.filter(f=>f.status==="in_transit").length,u=e.reduce((f,k)=>f+(k.earningsValue||0),0),y=e.reduce((f,k)=>f+k.ecoPackages,0);return[{label:"Assignments queued",value:t,delta:i,caption:`${i} ready for pickup`},{label:"In transit",value:n,delta:0,caption:"Deliveries currently on the road"},{label:"Earnings today",value:te(u),delta:e.filter(f=>f.completed).length,caption:"Including bonuses"},{label:"Eco packages",value:y,delta:0,caption:"Packages marked eco-friendly"}]});function E(e){h.value=e,V.replace({query:{...M.query,focus:e}})}function fe(){d.value=!d.value,w.info(d.value?"Auto-assignment enabled":"Auto-assignment disabled")}function ve(){w.error("Support has been notified. Stay safe!")}function ee(){w.success("Opening scanner...")}function xe(e){w.info(`Dialing ${e.contactPhone}`)}function he(e){w.info(`Starting chat with ${e.contactName}`)}function be(e){X[e.id]=!0,w.success(`Marked assignment #${e.id} as picked up`)}function _e(e){w.info(`Starting navigation to ${e.dropoffLabel}`)}function ye(e){E(e.id),R.value=!0}function ke(e,t){const i=N.get(e)||{};i[t]=!i[t],N.set(e,i)}function te(e){return e?`kr ${Math.round(e).toLocaleString()}`:"kr 0"}function we(e,t){const i=String(e.delivery?.id??e.delivery?.uuid??`assignment-${t+1}`),n=$e(e),u=Ce(e),y=e.packages||[],f=y.filter(G=>!G.hazardous).length,k=Le(e),ze=Me(e),Fe=Te(i,e,t),Ee=Oe(i,n),Ve=je(i,e,n),ie=!!X[i];return{id:i,original:e,status:ie&&n==="ready"?"in_transit":n,priority:u,priorityBadge:u==="urgent"?"bg-red-100 text-red-700":u==="express"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",priorityLabel:u==="standard"?"Standard":u==="express"?"Express":"Urgent",pickupLabel:e.pickup_location||e.delivery?.pickup_location||"Pickup TBD",dropoffLabel:e.delivery?.delivery_location||e.location||"Destination TBD",packages:y,ecoPackages:f,earningsValue:k,earningsLabel:k?te(k):"kr 0",timeLabel:Se(e)||"Time TBD",distanceLabel:Ae(e)||"Distance TBD",pickupWindow:ze,contactName:e.delivery?.receiver?.name||e.actor?.name||"Recipient",contactPhone:e.delivery?.receiver?.phone||e.actor?.phone||"N/A",coordinates:Fe,tasks:Ee,timeline:Ve,completed:y.every(G=>(G.delivery_status||"").toLowerCase().includes("delivered")),localPicked:ie}}function $e(e){const t=(e.packages||[]).map(i=>(i.delivery_status||"").toLowerCase());return t.some(i=>i.includes("delayed")||i.includes("exception"))?"needs_action":t.some(i=>i.includes("picked")||i.includes("transit"))?"in_transit":"ready"}function Ce(e){const t=(e.delivery?.service||"").toLowerCase();return t.includes("express")||t.includes("same day")?"express":(e.packages||[]).some(i=>i.fragile||i.hazardous)?"urgent":"standard"}function Le(e){const t=e.delivery,i=[t?.fee,t?.price,t?.total_price,t?.delivery_fee];for(const n of i){if(n==null)continue;const u=typeof n=="number"?n:parseFloat(String(n));if(Number.isFinite(u))return u}return 0}function Se(e){const t=e.pickup_time||e.delivery?.pickup_time||e.delivery?.delivery_time;return t?t.slice(0,5):null}function Ae(e){const t=e?.distance_km||e?.distance;if(!t)return null;const i=typeof t=="number"?t:parseFloat(String(t));return Number.isFinite(i)?`${i.toFixed(1)} km`:null}function Me(e){const t=e.pickup_date||e.delivery?.pickup_date,i=e.pickup_time||e.delivery?.pickup_time;if(!t&&!i)return"Window pending";if(!t)return`At ${i?.slice(0,5)}`;const n=new Date(`${t}T${i||"00:00:00"}`);return Number.isNaN(n.getTime())?`${t} ${i||""}`.trim():`${n.toLocaleDateString()} - ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}const U=new Set;function Te(e,t,i){const n=q[e];if(n)return n;const u=Ne(t);return u?(q[e]=u,u):(U.has(e)||(U.add(e),De(e,t).finally(()=>U.delete(e))),Pe(i))}function Ne(e){const t=[],i=e,n=e.delivery||{};t.push({lat:i.delivery_latitude,lng:i.delivery_longitude}),t.push({lat:i.pickup_latitude,lng:i.pickup_longitude}),t.push({lat:n.delivery_latitude,lng:n.delivery_longitude}),t.push({lat:n.pickup_latitude,lng:n.pickup_longitude}),t.push({lat:i.latitude,lng:i.longitude});for(const u of t){const y=se(u.lat),f=se(u.lng);if(y!=null&&f!=null)return{lat:y,lng:f}}return null}async function De(e,t){const i=t.delivery?.delivery_location||t.location||t.pickup_location;if(!i)return;const n=await Ye(i);n&&(q[e]=n)}function Pe(e){const n=e*.003;return{lat:59.9139+n,lng:10.7522+n}}function se(e){if(e==null)return null;if(typeof e=="number")return Number.isFinite(e)?e:null;const t=parseFloat(String(e));return Number.isFinite(t)?t:null}function Oe(e,t){const i=[{id:`${e}-verify-id`,label:"Verify recipient ID",dueLabel:"Before delivery"},{id:`${e}-collect-signature`,label:"Collect signature",dueLabel:"At drop-off"},{id:`${e}-photo-proof`,label:"Photo proof of delivery",dueLabel:"After drop-off"}];return t==="ready"&&i.unshift({id:`${e}-inspect-package`,label:"Inspect package condition",dueLabel:"At pickup"}),i}function je(e,t,i){const n=new Date;return[{id:`${e}-created`,title:"Assignment created",description:`New assignment scheduled for ${t.delivery?.delivery_location||"destination"}.`,timestamp:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:i,color:"bg-blue-500",assignmentLabel:t.delivery?.delivery_location||t.location||e,sortOrder:n.getTime()-3e5},{id:`${e}-reminder`,title:i==="ready"?"Pickup window approaching":"Keep driving",description:i==="ready"?"Head to pickup location within the next 15 minutes.":"Continue to destination, traffic looks clear ahead.",timestamp:new Date(n.getTime()+6e5).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:i,color:i==="needs_action"?"bg-red-500":i==="in_transit"?"bg-amber-500":"bg-blue-500",assignmentLabel:t.delivery?.delivery_location||t.location||e,sortOrder:n.getTime()+6e5}]}function Be(){const t=new Date().toISOString().slice(0,10);return[{type:"delivery",delivery:{id:5012,pickup_location:"SamBring Logistics Hub",delivery_location:"Fjordgata 12, Oslo",receiver:{name:"Alex Johnson",phone:"+47 998 88 776"},service:"standard",pickup_date:t,pickup_time:"09:30:00",delivery_date:t,delivery_time:"10:15:00",pickup_latitude:59.9096,pickup_longitude:10.7449,delivery_latitude:59.9187,delivery_longitude:10.7523},packages:[{id:9101,description:"Organic produce crate",weight:4.5,weight_unit:"kg",length:40,width:35,height:25,dimension_unit:"cm",hazardous:!1,fragile:!0,delivery_status:"ready_for_pickup"}],location:"Fjordgata 12, Oslo",date:t,time:"10:15:00",pickup_location:"SamBring Logistics Hub",pickup_date:t,pickup_time:"09:30:00",pickup_latitude:59.9096,pickup_longitude:10.7449,delivery_latitude:59.9187,delivery_longitude:10.7523,actor:{name:"Alex Johnson",phone:"+47 998 88 776"},actor_type:"receiver",is_delivered:!1},{type:"delivery",delivery:{id:5013,pickup_location:"Eco Market Warehouse",delivery_location:"Nordveien 22, Oslo",receiver:{name:"Maria Berg",phone:"+47 990 11 223"},service:"express",pickup_date:t,pickup_time:"11:00:00",delivery_date:t,delivery_time:"11:30:00",pickup_latitude:59.921,pickup_longitude:10.761,delivery_latitude:59.9265,delivery_longitude:10.7531},packages:[{id:9102,description:"Medical supplies",weight:2.1,weight_unit:"kg",length:30,width:25,height:20,dimension_unit:"cm",hazardous:!1,fragile:!1,delivery_status:"picked_up"}],location:"Nordveien 22, Oslo",date:t,time:"11:30:00",pickup_location:"Eco Market Warehouse",pickup_date:t,pickup_time:"11:00:00",pickup_latitude:59.921,pickup_longitude:10.761,delivery_latitude:59.9265,delivery_longitude:10.7531,actor:{name:"Maria Berg",phone:"+47 990 11 223"},actor_type:"receiver",is_delivered:!1},{type:"delivery",delivery:{id:5014,pickup_location:"Downtown Electronics",delivery_location:"Storgata 84, Oslo",receiver:{name:"Leif Andersen",phone:"+47 955 44 332"},service:"same day",pickup_date:t,pickup_time:"13:15:00",delivery_date:t,delivery_time:"14:00:00",pickup_latitude:59.9175,pickup_longitude:10.733,delivery_latitude:59.9121,delivery_longitude:10.7608},packages:[{id:9103,description:"Refurbished laptop",weight:1.7,weight_unit:"kg",length:35,width:25,height:5,dimension_unit:"cm",hazardous:!1,fragile:!0,delivery_status:"in_transit"}],location:"Storgata 84, Oslo",date:t,time:"14:00:00",pickup_location:"Downtown Electronics",pickup_date:t,pickup_time:"13:15:00",pickup_latitude:59.9175,pickup_longitude:10.733,delivery_latitude:59.9121,delivery_longitude:10.7608,actor:{name:"Leif Andersen",phone:"+47 955 44 332"},actor_type:"receiver",is_delivered:!1}]}return(e,t)=>(l(),r("section",Nt,[s("header",Dt,[s("div",Pt,[s("div",Ot,[s("div",jt,[t[4]||(t[4]=s("h1",{class:"text-2xl font-semibold text-gray-900"},"Assignments",-1)),s("span",{class:b(["inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium",z.value?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"])},[g(p(it),{class:"w-3.5 h-3.5"}),v(" "+o(z.value?"Online":"Offline"),1)],2)]),s("div",Bt,[s("span",zt,[g(p(K),{class:"w-3.5 h-3.5"}),v(" Next pickup: "+o(pe.value),1)]),F.value?(l(),r("span",Ft,[g(p(oe),{class:"w-3.5 h-3.5"}),v(" "+o(F.value.dropoffLabel),1)])):x("",!0)])]),s("div",Et,[s("button",{class:b(["h-9 px-3 rounded-lg border text-sm inline-flex items-center gap-2 transition",d.value?"border-green-200 bg-green-50 text-green-700 hover:bg-green-100":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50"]),onClick:fe},[(l(),ae(He(d.value?p(pt):p(ut)),{class:"w-4 h-4"})),s("span",null,o(d.value?"Auto assign on":"Auto assign off"),1)],2),s("button",{class:"h-9 px-3 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 text-sm inline-flex items-center gap-2 text-red-700",onClick:ve},[g(p(ct),{class:"w-4 h-4"}),t[5]||(t[5]=s("span",null,"SOS / Support",-1))]),s("button",{class:"h-9 px-3 rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 text-sm inline-flex items-center gap-2 text-blue-700",onClick:ee},[g(p(dt),{class:"w-4 h-4"}),t[6]||(t[6]=s("span",null,"Scan label / QR",-1))])])])]),I.value?(l(),r("section",Vt,[s("div",Rt,[g(p(nt),{class:"w-4 h-4 mt-0.5"}),s("div",null,[t[7]||(t[7]=s("div",{class:"font-semibold"},"Assignments are unavailable",-1)),s("p",qt,o(I.value)+". Showing sample assignments so you can preview the workflow. ",1)]),s("button",{class:"ml-auto text-xs text-amber-700 underline",onClick:t[0]||(t[0]=(...i)=>p(A)&&p(A)(...i))},"Retry")])])):x("",!0),s("section",It,[s("div",Wt,[(l(!0),r($,null,C(me.value,i=>(l(),r("div",{key:i.label,class:"rounded-xl border bg-white px-4 py-3 shadow-sm"},[s("div",Ht,o(i.label),1),s("div",Ut,[s("span",Gt,o(i.value),1),i.delta?(l(),r("span",{key:0,class:b(["text-xs",i.delta>0?"text-green-600":"text-gray-500"])},o(i.delta>0?`+${i.delta}`:i.delta),3)):x("",!0)]),s("p",Jt,o(i.caption),1)]))),128))])]),s("section",Kt,[s("div",Qt,[s("div",Xt,[(l(!0),r($,null,C(ce.value,i=>(l(),r("button",{key:i.id,class:b(["px-3 py-2 rounded-lg border text-sm inline-flex flex-col items-start gap-1 min-w-[160px]",h.value===i.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-200 hover:bg-blue-50/50"]),onClick:n=>E(i.id)},[s("span",Yt,[g(p(oe),{class:"w-3.5 h-3.5"}),v(" "+o(i.label),1)]),s("span",es,[g(p(K),{class:"w-3 h-3"}),v(" "+o(i.time)+" - "+o(i.distance),1)]),s("div",ts,[s("div",{class:"h-1 rounded-full bg-blue-500",style:Ke({width:i.progress+"%"})},null,4)])],10,Zt))),128))])])]),s("section",ss,[s("div",is,[s("div",ns,[(l(!0),r($,null,C(de.value,i=>(l(),r("div",{key:i.id,class:"rounded-xl border bg-white shadow-sm"},[s("header",os,[s("div",ls,[s("span",{class:b(["h-2.5 w-2.5 rounded-full",i.dot])},null,2),s("h2",as,o(i.label),1),s("span",rs,"("+o(i.items.length)+")",1)])]),i.items.length?(l(),r("div",cs,[(l(!0),r($,null,C(i.items,n=>(l(),r("article",{key:n.id,class:b(["px-4 py-4 space-y-3 cursor-pointer hover:bg-blue-50/40",h.value===n.id?"bg-blue-50/60":""]),onClick:u=>E(n.id)},[s("div",ps,[s("div",null,[s("div",gs,[g(p(Qe),{class:"w-4 h-4"}),v(" "+o(n.pickupLabel),1)]),s("div",ms,"to "+o(n.dropoffLabel),1),s("div",fs,[s("span",vs,[g(p(K),{class:"w-3 h-3"}),v(" "+o(n.timeLabel),1)]),s("span",null,o(n.distanceLabel),1),s("span",xs,o(n.earningsLabel),1)])]),s("div",hs,[s("span",{class:b(["px-2 py-0.5 rounded-full text-xs font-medium",n.priorityBadge])},o(n.priorityLabel),3),s("button",{class:"text-xs text-blue-600 hover:underline",onClick:D(u=>ye(n),["stop"])},"View details",8,bs)])]),s("div",_s,[s("div",null,[t[8]||(t[8]=s("div",{class:"font-medium text-gray-800"},"Pickup Window",-1)),s("div",null,o(n.pickupWindow),1)]),s("div",null,[t[9]||(t[9]=s("div",{class:"font-medium text-gray-800"},"Contact",-1)),s("div",null,o(n.contactName)+" - "+o(n.contactPhone),1)])]),s("div",ys,[s("button",{class:"h-8 px-3 text-xs rounded-lg border bg-white hover:bg-gray-50 inline-flex items-center gap-1",onClick:D(u=>xe(n),["stop"])},[g(p(rt),{class:"w-3.5 h-3.5"}),t[10]||(t[10]=v(" Call ",-1))],8,ks),s("button",{class:"h-8 px-3 text-xs rounded-lg border bg-white hover:bg-gray-50 inline-flex items-center gap-1",onClick:D(u=>he(n),["stop"])},[g(p(Xe),{class:"w-3.5 h-3.5"}),t[11]||(t[11]=v(" Message ",-1))],8,ws),n.localPicked?x("",!0):(l(),r("button",{key:0,class:"h-8 px-3 text-xs rounded-lg bg-green-600 text-white hover:bg-green-700 inline-flex items-center gap-1",onClick:D(u=>be(n),["stop"])},[g(p(lt),{class:"w-3.5 h-3.5"}),t[12]||(t[12]=v(" Picked up ",-1))],8,$s)),s("button",{class:"h-8 px-3 text-xs rounded-lg bg-blue-600 text-white hover:bg-blue-700 inline-flex items-center gap-1",onClick:D(u=>_e(n),["stop"])},[g(p(at),{class:"w-3.5 h-3.5"}),t[13]||(t[13]=v(" Navigate ",-1))],8,Cs)])],10,us))),128))])):(l(),r("div",ds,"Nothing here right now."))]))),128))]),s("div",Ls,[s("div",Ss,[s("div",As,[s("div",Ms,[g(p(ot),{class:"w-4 h-4"}),t[14]||(t[14]=v(" Live Route Map ",-1))]),t[15]||(t[15]=s("span",{class:"text-xs text-gray-500"},"Auto-focused on selected assignment",-1))]),g(et,{center:ue.value,markers:T.value,"open-marker-id":h.value,height:"320px"},null,8,["center","markers","open-marker-id"])]),s("div",Ts,[s("button",{class:"w-full px-4 py-3 border-b flex items-center justify-between text-sm font-semibold text-gray-800",onClick:t[1]||(t[1]=i=>a.value=!a.value)},[s("span",Ns,[g(p(Ue),{class:"w-4 h-4"}),t[16]||(t[16]=v(" Micro Tasks ",-1))]),s("span",Ds,o(ge.value)+"/"+o(H.value.length)+" done",1)]),a.value?(l(),r("div",Ps,[(l(!0),r($,null,C(H.value,i=>(l(),r("div",{key:i.id,class:"px-4 py-3 flex items-center justify-between gap-3 text-sm"},[s("div",Os,[s("span",js,o(i.label),1),s("span",Bs,o(i.assignmentLabel)+" - "+o(i.dueLabel),1)]),s("button",{class:b(["h-7 w-7 rounded-full border flex items-center justify-center",i.completed?"bg-green-500 border-green-500 text-white":"bg-white hover:bg-gray-50 text-gray-600"]),onClick:n=>ke(i.assignmentId,i.id)},[g(p(tt),{class:"w-4 h-4"})],10,zs)]))),128))])):x("",!0)]),s("div",Fs,[s("header",Es,[t[18]||(t[18]=s("span",{class:"text-sm font-semibold text-gray-800"},"Timeline & Activity",-1)),Ge(s("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>c.value=i),class:"h-8 px-2 text-xs border rounded"},[...t[17]||(t[17]=[s("option",{value:"all"},"All",-1),s("option",{value:"ready"},"Ready for pickup",-1),s("option",{value:"in_transit"},"In transit",-1),s("option",{value:"needs_action"},"Needs action",-1)])],512),[[Je,c.value]])]),s("ol",Vs,[(l(!0),r($,null,C(Y.value,i=>(l(),r("li",{key:i.id,class:"flex gap-3"},[s("div",Rs,[s("span",{class:b(["h-2.5 w-2.5 rounded-full inline-block",i.color])},null,2)]),s("div",null,[s("div",qs,o(i.title),1),s("div",Is,o(i.timestamp)+" - "+o(i.assignmentLabel),1),s("p",Ws,o(i.description),1)])]))),128)),Y.value.length?x("",!0):(l(),r("li",Hs,"No events for this filter."))])])])])]),g(Tt,{open:R.value,packages:F.value?.packages||[],"assignment-id":F.value?.id,onClose:t[3]||(t[3]=i=>R.value=!1),onScan:ee},null,8,["open","packages","assignment-id"])]))}});export{Ys as default};
