import{s as O,d as oe,c as m,l as le,a as d,b as x,e as i,t as o,L as g,u as p,F as C,x as L,R as Fe,y as h,o as r,r as w,m as Ve,S as G,i as Re,K as qe,G as F,M as v,A as Ie,a1 as We,j as He,a2 as Ue,Z as $,z as Ge,T as Je,w as P,a3 as Ke,n as Qe}from"./index-Dub0P0Pe.js";import{g as Xe,S as Ze,C as Ye}from"./geocode-DYAudl-n.js";import{X as et}from"./x-C2p3G2ey.js";import{C as tt,T as it}from"./triangle-alert-BZg_P4rB.js";import{M as st,C as ne,P as nt}from"./package-vZr-83_z.js";import{M as ot,N as lt}from"./navigation-mYFUNb6t.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=O("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=O("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=O("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=O("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=O("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),pt={key:0,class:"fixed inset-0 z-[1200]"},gt={class:"absolute inset-0 flex items-center justify-center p-4"},mt={class:"w-full max-w-xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/10 overflow-hidden"},ft={class:"px-4 py-3 border-b flex items-center justify-between"},vt={key:0,class:"text-xs text-gray-500"},xt={class:"max-h-[60vh] overflow-y-auto divide-y"},bt={key:0,class:"px-4 py-6 text-sm text-gray-500"},ht={class:"flex items-center justify-between"},_t={class:"text-sm font-semibold"},yt={class:"grid grid-cols-2 gap-3 text-xs text-gray-600"},kt={class:"capitalize"},wt={class:"text-xs text-gray-600"},$t={class:"list-disc ml-4 space-y-0.5"},Ct={key:0},Lt={key:1},St={key:2},At={class:"px-4 py-3 border-t flex items-center justify-end gap-2"},Mt=oe({__name:"AssignmentPackageModal",props:{open:{type:Boolean},packages:{},assignmentId:{}},emits:["close","scan"],setup(J,{emit:S}){const j=J,A=S,M=m(()=>j.packages||[]),z=m(()=>j.assignmentId);function T(u){if(!u.weight)return"-";const l=u.weight_unit||"kg";return`${u.weight} ${l}`}function B(u){if(!u.length||!u.width||!u.height)return"-";const l=u.dimension_unit||"cm";return`${u.length}x${u.width}x${u.height} ${l}`}function y(u){const l=u.temperature_unit||"C";return`${u.temperature_c} ${l}`}return(u,l)=>(r(),le(Fe,{to:"body"},[u.open?(r(),d("div",pt,[i("div",{class:"absolute inset-0 bg-black/40",onClick:l[0]||(l[0]=a=>A("close"))}),i("div",gt,[i("section",mt,[i("header",ft,[i("div",null,[l[4]||(l[4]=i("h3",{class:"text-lg font-semibold"},"Package Details",-1)),z.value?(r(),d("p",vt,"Assignment #"+o(z.value),1)):x("",!0)]),i("button",{class:"h-8 w-8 rounded-full hover:bg-gray-100 grid place-items-center",onClick:l[1]||(l[1]=a=>A("close")),"aria-label":"Close"},[g(p(et),{class:"w-4 h-4"})])]),i("div",xt,[M.value.length?x("",!0):(r(),d("div",bt,"No package details available.")),(r(!0),d(C,null,L(M.value,a=>(r(),d("article",{key:a.id??a.description,class:"px-4 py-3 space-y-2"},[i("div",ht,[i("div",_t,"Package "+o(a.id??"unknown"),1),i("span",{class:h(["text-xs px-2 py-0.5 rounded-full",a.hazardous?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"])},o(a.hazardous?"Hazardous":"Eco"),3)]),i("div",yt,[i("div",null,[l[5]||(l[5]=i("div",{class:"font-medium text-gray-800"},"Description",-1)),i("div",null,o(a.description||"-"),1)]),i("div",null,[l[6]||(l[6]=i("div",{class:"font-medium text-gray-800"},"Weight",-1)),i("div",null,o(T(a)),1)]),i("div",null,[l[7]||(l[7]=i("div",{class:"font-medium text-gray-800"},"Dimensions",-1)),i("div",null,o(B(a)),1)]),i("div",null,[l[8]||(l[8]=i("div",{class:"font-medium text-gray-800"},"Status",-1)),i("div",kt,o((a.delivery_status||"pending").replace(/_/g," ")),1)])]),i("div",wt,[l[9]||(l[9]=i("div",{class:"font-medium text-gray-800 mb-1"},"Handling",-1)),i("ul",$t,[a.fragile?(r(),d("li",Ct,"Fragile - handle with care")):x("",!0),a.temperature_c?(r(),d("li",Lt,"Temperature sensitive: "+o(y(a)),1)):x("",!0),!a.fragile&&!a.temperature_c?(r(),d("li",St,"No special handling notes.")):x("",!0)])])]))),128))]),i("footer",At,[i("button",{class:"h-9 px-3 text-sm rounded border bg-white hover:bg-gray-50",onClick:l[2]||(l[2]=a=>A("close"))}," Close "),i("button",{class:"h-9 px-3 text-sm rounded bg-blue-600 text-white hover:bg-blue-700",onClick:l[3]||(l[3]=a=>A("scan"))}," Scan & Confirm ")])])])])):x("",!0)]))}}),Tt={class:"space-y-6 pb-12"},Dt={class:"sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-gray-200/60"},Nt={class:"px-4 md:px-6 py-4 flex flex-wrap items-center justify-between gap-4"},Pt={class:"flex items-center gap-3"},Ot={class:"flex items-center gap-2 flex-wrap"},jt={key:0,class:"px-4 md:px-6"},zt={class:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800 flex items-start gap-3"},Bt={class:"mt-0.5"},Et={class:"px-4 md:px-6"},Ft={class:"grid gap-3 md:grid-cols-4"},Vt={class:"text-xs uppercase tracking-wide text-gray-500"},Rt={class:"mt-1 flex items-baseline gap-2"},qt={class:"text-xl font-semibold text-gray-900"},It={class:"text-xs text-gray-500 mt-1"},Wt={class:"px-4 md:px-6"},Ht={class:"rounded-xl border bg-white shadow-sm px-4 py-3 overflow-x-auto"},Ut={class:"flex items-center gap-3 min-w-max"},Gt=["onClick"],Jt={class:"font-medium flex items-center gap-1"},Kt={class:"text-xs text-gray-500 flex items-center gap-2"},Qt={class:"w-full h-1 rounded-full bg-gray-200"},Xt={class:"px-4 md:px-6"},Zt={class:"grid gap-4 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]"},Yt={class:"space-y-4"},ei={class:"px-4 py-3 border-b flex items-center justify-between"},ti={class:"flex items-center gap-2"},ii={class:"text-sm font-semibold text-gray-800"},si={class:"text-xs text-gray-500"},ni={key:0,class:"px-4 py-6 text-sm text-gray-500"},oi={key:1,class:"divide-y"},li=["onClick"],ai={class:"flex items-start justify-between gap-3"},ri={class:"flex items-center gap-2 text-sm font-semibold text-gray-900"},di={class:"text-xs text-gray-500"},ci={class:"mt-1 flex items-center gap-3 text-xs text-gray-500"},ui={class:"inline-flex items-center gap-1"},pi={class:"font-medium text-green-700"},gi={class:"flex flex-col items-end gap-1 text-xs text-gray-500"},mi=["onClick"],fi={class:"grid md:grid-cols-2 gap-3 text-xs text-gray-600"},vi={class:"flex items-center gap-2"},xi=["onClick"],bi=["onClick"],hi=["onClick"],_i=["onClick"],yi={class:"space-y-4"},ki={class:"rounded-xl border bg-white shadow-sm overflow-hidden"},wi={class:"px-4 py-3 border-b flex items-center justify-between"},$i={class:"flex items-center gap-2 text-sm font-semibold text-gray-800"},Ci={class:"rounded-xl border bg-white shadow-sm overflow-hidden"},Li={class:"inline-flex items-center gap-2"},Si={class:"text-xs text-gray-500"},Ai={key:0,class:"max-h-64 overflow-y-auto divide-y"},Mi={class:"flex flex-col"},Ti={class:"font-medium text-gray-800"},Di={class:"text-xs text-gray-500"},Ni=["onClick"],Pi={class:"rounded-xl border bg-white shadow-sm"},Oi={class:"px-4 py-3 border-b flex items-center justify-between"},ji={class:"px-4 py-3 space-y-3 text-sm"},zi={class:"mt-1"},Bi={class:"font-medium text-gray-900"},Ei={class:"text-xs text-gray-500"},Fi={class:"text-xs text-gray-600 mt-1"},Vi={key:0,class:"text-xs text-gray-500"},Ji=oe({__name:"AssignmentsView",setup(J){const{future:S,error:j,loadFuture:A,refresh:M}=qe(),z=Qe(),T=Ve(),B=w(!0),y=w(!0),u=w(!0),l=w("all"),a=w(T.query.focus||null),V=w(!1),K=G({}),R=G({});Re(()=>{S.value||A().catch(()=>{})}),F(()=>T.query.focus,e=>{typeof e=="string"&&E(e)});const q=m(()=>j.value||null),Q=Oe(),I=w(Q);F(()=>S.value,e=>{e&&e.length&&(I.value=e)},{immediate:!0}),F(q,e=>{e&&(!S.value||!S.value.length)&&(I.value=Q)});const b=m(()=>I.value.map((e,t)=>ye(e,t)));F(b,e=>{if(!e.length){a.value=null;return}a.value&&e.some(t=>t.id===a.value)||(a.value=e[0].id)},{immediate:!0});const X=m(()=>b.value.find(e=>e.id===a.value)||null),ae=m(()=>{const e=[{id:"ready",label:"Ready for pickup",dot:"bg-blue-500",items:[]},{id:"in_transit",label:"In transit",dot:"bg-amber-500",items:[]},{id:"needs_action",label:"Needs attention",dot:"bg-red-500",items:[]}];for(const t of b.value){const s=e.find(n=>n.id===t.status);s&&s.items.push(t)}return e}),re=m(()=>b.value.map((e,t,s)=>({id:e.id,label:e.dropoffLabel,time:e.timeLabel,distance:e.distanceLabel,progress:s.length<=1?100:Math.round(t/(s.length-1)*100)}))),D=m(()=>b.value.map(e=>({id:e.id,lat:e.coordinates.lat,lng:e.coordinates.lng,label:`${e.dropoffLabel}
${e.timeLabel}`,kind:e.status==="needs_action"?"nearby":"job",color:e.status==="needs_action"?"#f97316":e.status==="in_transit"?"#2563eb":"#16a34a"}))),de=m(()=>{const e=D.value.find(t=>t.id===a.value);return e?{lat:e.lat,lng:e.lng}:D.value[0]?{lat:D.value[0].lat,lng:D.value[0].lng}:{lat:59.9139,lng:10.7522}}),ce=m(()=>{const e=b.value[0];return e?e.timeLabel:"No assignments queued"}),N=G(new Map),W=m(()=>{const e=[];for(const t of b.value)for(const s of t.tasks){N.get(t.id)||N.set(t.id,{});const n=N.get(t.id)[s.id]||!1;e.push({id:s.id,label:s.label,dueLabel:s.dueLabel,assignmentId:t.id,assignmentLabel:t.dropoffLabel,completed:n})}return e}),ue=m(()=>W.value.filter(e=>e.completed).length),Z=m(()=>{const e=[];for(const t of b.value)e.push(...t.timeline);return e.sort((t,s)=>t.sortOrder-s.sortOrder)}),Y=m(()=>l.value==="all"?Z.value:Z.value.filter(e=>e.status===l.value)),pe=m(()=>{const e=b.value,t=e.length,s=e.filter(f=>f.status==="ready").length,n=e.filter(f=>f.status==="in_transit").length,c=e.reduce((f,k)=>f+(k.earningsValue||0),0),_=e.reduce((f,k)=>f+k.ecoPackages,0);return[{label:"Assignments queued",value:t,delta:s,caption:`${s} ready for pickup`},{label:"In transit",value:n,delta:0,caption:"Deliveries currently on the road"},{label:"Earnings today",value:te(c),delta:e.filter(f=>f.completed).length,caption:"Including bonuses"},{label:"Eco packages",value:_,delta:0,caption:"Packages marked eco-friendly"}]});function E(e){a.value=e,z.replace({query:{...T.query,focus:e}})}function ge(){y.value=!y.value,$.info(y.value?"Auto-assignment enabled":"Auto-assignment disabled")}function me(){$.error("Support has been notified. Stay safe!")}function ee(){$.success("Opening scanner…")}function fe(e){$.info(`Dialing ${e.contactPhone}`)}function ve(e){$.info(`Starting chat with ${e.contactName}`)}function xe(e){K[e.id]=!0,$.success(`Marked assignment #${e.id} as picked up`)}function be(e){$.info(`Starting navigation to ${e.dropoffLabel}`)}function he(e){E(e.id),V.value=!0}function _e(e,t){const s=N.get(e)||{};s[t]=!s[t],N.set(e,s)}function te(e){return e?`kr ${Math.round(e).toLocaleString()}`:"kr 0"}function ye(e,t){const s=String(e.delivery?.id??e.delivery?.uuid??`assignment-${t+1}`),n=ke(e),c=we(e),_=e.packages||[],f=_.filter(U=>!U.hazardous).length,k=$e(e),je=Se(e),ze=Ae(s,e,t),Be=Ne(s,n),Ee=Pe(s,e,n),se=!!K[s];return{id:s,original:e,status:se&&n==="ready"?"in_transit":n,priority:c,priorityBadge:c==="urgent"?"bg-red-100 text-red-700":c==="express"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",priorityLabel:c==="standard"?"Standard":c==="express"?"Express":"Urgent",pickupLabel:e.pickup_location||e.delivery?.pickup_location||"Pickup TBD",dropoffLabel:e.delivery?.delivery_location||e.location||"Destination TBD",packages:_,ecoPackages:f,earningsValue:k,earningsLabel:k?te(k):"kr 0",timeLabel:Ce(e)||"Time TBD",distanceLabel:Le(e)||"Distance TBD",pickupWindow:je,contactName:e.delivery?.receiver?.name||e.actor?.name||"Recipient",contactPhone:e.delivery?.receiver?.phone||e.actor?.phone||"N/A",coordinates:ze,tasks:Be,timeline:Ee,completed:_.every(U=>(U.delivery_status||"").toLowerCase().includes("delivered")),localPicked:se}}function ke(e){const t=(e.packages||[]).map(s=>(s.delivery_status||"").toLowerCase());return t.some(s=>s.includes("delayed")||s.includes("exception"))?"needs_action":t.some(s=>s.includes("picked")||s.includes("transit"))?"in_transit":"ready"}function we(e){const t=(e.delivery?.service||"").toLowerCase();return t.includes("express")||t.includes("same day")?"express":(e.packages||[]).some(s=>s.fragile||s.hazardous)?"urgent":"standard"}function $e(e){const t=e.delivery,s=[t?.fee,t?.price,t?.total_price,t?.delivery_fee];for(const n of s){if(n==null)continue;const c=typeof n=="number"?n:parseFloat(String(n));if(Number.isFinite(c))return c}return 0}function Ce(e){const t=e.pickup_time||e.delivery?.pickup_time||e.delivery?.delivery_time;return t?t.slice(0,5):null}function Le(e){const t=e?.distance_km||e?.distance;if(!t)return null;const s=typeof t=="number"?t:parseFloat(String(t));return Number.isFinite(s)?`${s.toFixed(1)} km`:null}function Se(e){const t=e.pickup_date||e.delivery?.pickup_date,s=e.pickup_time||e.delivery?.pickup_time;if(!t&&!s)return"Window pending";if(!t)return`At ${s?.slice(0,5)}`;const n=new Date(`${t}T${s||"00:00:00"}`);return Number.isNaN(n.getTime())?`${t} ${s||""}`.trim():`${n.toLocaleDateString()} - ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}const H=new Set;function Ae(e,t,s){const n=R[e];if(n)return n;const c=Me(t);return c?(R[e]=c,c):(H.has(e)||(H.add(e),Te(e,t).finally(()=>H.delete(e))),De(s))}function Me(e){const t=[],s=e,n=e.delivery||{};t.push({lat:s.delivery_latitude,lng:s.delivery_longitude}),t.push({lat:s.pickup_latitude,lng:s.pickup_longitude}),t.push({lat:n.delivery_latitude,lng:n.delivery_longitude}),t.push({lat:n.pickup_latitude,lng:n.pickup_longitude}),t.push({lat:s.latitude,lng:s.longitude});for(const c of t){const _=ie(c.lat),f=ie(c.lng);if(_!=null&&f!=null)return{lat:_,lng:f}}return null}async function Te(e,t){const s=t.delivery?.delivery_location||t.location||t.pickup_location;if(!s)return;const n=await Xe(s);n&&(R[e]=n)}function De(e){const n=e*.003;return{lat:59.9139+n,lng:10.7522+n}}function ie(e){if(e==null)return null;if(typeof e=="number")return Number.isFinite(e)?e:null;const t=parseFloat(String(e));return Number.isFinite(t)?t:null}function Ne(e,t){const s=[{id:`${e}-verify-id`,label:"Verify recipient ID",dueLabel:"Before delivery"},{id:`${e}-collect-signature`,label:"Collect signature",dueLabel:"At drop-off"},{id:`${e}-photo-proof`,label:"Photo proof of delivery",dueLabel:"After drop-off"}];return t==="ready"&&s.unshift({id:`${e}-inspect-package`,label:"Inspect package condition",dueLabel:"At pickup"}),s}function Pe(e,t,s){const n=new Date;return[{id:`${e}-created`,title:"Assignment created",description:`New assignment scheduled for ${t.delivery?.delivery_location||"destination"}.`,timestamp:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:s,color:"bg-blue-500",assignmentLabel:t.delivery?.delivery_location||t.location||e,sortOrder:n.getTime()-3e5},{id:`${e}-reminder`,title:s==="ready"?"Pickup window approaching":"Keep driving",description:s==="ready"?"Head to pickup location within the next 15 minutes.":"Continue to destination, traffic looks clear ahead.",timestamp:new Date(n.getTime()+6e5).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:s,color:s==="needs_action"?"bg-red-500":s==="in_transit"?"bg-amber-500":"bg-blue-500",assignmentLabel:t.delivery?.delivery_location||t.location||e,sortOrder:n.getTime()+6e5}]}function Oe(){const t=new Date().toISOString().slice(0,10);return[{type:"delivery",delivery:{id:5012,pickup_location:"SamBring Logistics Hub",delivery_location:"Fjordgata 12, Oslo",receiver:{name:"Alex Johnson",phone:"+47 998 88 776"},service:"standard",pickup_date:t,pickup_time:"09:30:00",delivery_date:t,delivery_time:"10:15:00",pickup_latitude:59.9096,pickup_longitude:10.7449,delivery_latitude:59.9187,delivery_longitude:10.7523},packages:[{id:9101,description:"Organic produce crate",weight:4.5,weight_unit:"kg",length:40,width:35,height:25,dimension_unit:"cm",hazardous:!1,fragile:!0,delivery_status:"ready_for_pickup"}],location:"Fjordgata 12, Oslo",date:t,time:"10:15:00",pickup_location:"SamBring Logistics Hub",pickup_date:t,pickup_time:"09:30:00",pickup_latitude:59.9096,pickup_longitude:10.7449,delivery_latitude:59.9187,delivery_longitude:10.7523,actor:{name:"Alex Johnson",phone:"+47 998 88 776"},actor_type:"receiver",is_delivered:!1},{type:"delivery",delivery:{id:5013,pickup_location:"Eco Market Warehouse",delivery_location:"Nordveien 22, Oslo",receiver:{name:"Maria Berg",phone:"+47 990 11 223"},service:"express",pickup_date:t,pickup_time:"11:00:00",delivery_date:t,delivery_time:"11:30:00",pickup_latitude:59.921,pickup_longitude:10.761,delivery_latitude:59.9265,delivery_longitude:10.7531},packages:[{id:9102,description:"Medical supplies",weight:2.1,weight_unit:"kg",length:30,width:25,height:20,dimension_unit:"cm",hazardous:!1,fragile:!1,delivery_status:"picked_up"}],location:"Nordveien 22, Oslo",date:t,time:"11:30:00",pickup_location:"Eco Market Warehouse",pickup_date:t,pickup_time:"11:00:00",pickup_latitude:59.921,pickup_longitude:10.761,delivery_latitude:59.9265,delivery_longitude:10.7531,actor:{name:"Maria Berg",phone:"+47 990 11 223"},actor_type:"receiver",is_delivered:!1},{type:"delivery",delivery:{id:5014,pickup_location:"Downtown Electronics",delivery_location:"Storgata 84, Oslo",receiver:{name:"Leif Andersen",phone:"+47 955 44 332"},service:"same day",pickup_date:t,pickup_time:"13:15:00",delivery_date:t,delivery_time:"14:00:00",pickup_latitude:59.9175,pickup_longitude:10.733,delivery_latitude:59.9121,delivery_longitude:10.7608},packages:[{id:9103,description:"Refurbished laptop",weight:1.7,weight_unit:"kg",length:35,width:25,height:5,dimension_unit:"cm",hazardous:!1,fragile:!0,delivery_status:"in_transit"}],location:"Storgata 84, Oslo",date:t,time:"14:00:00",pickup_location:"Downtown Electronics",pickup_date:t,pickup_time:"13:15:00",pickup_latitude:59.9175,pickup_longitude:10.733,delivery_latitude:59.9121,delivery_longitude:10.7608,actor:{name:"Leif Andersen",phone:"+47 955 44 332"},actor_type:"receiver",is_delivered:!1}]}return(e,t)=>(r(),d("section",Tt,[i("header",Dt,[i("div",Nt,[i("div",null,[i("div",Pt,[t[4]||(t[4]=i("h1",{class:"text-2xl font-semibold text-gray-900"},"Assignments",-1)),i("span",{class:h(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium",B.value?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"])},[g(p(tt),{class:"w-3.5 h-3.5"}),v(" "+o(B.value?"Online":"Offline")+" - "+o(ce.value),1)],2)]),t[5]||(t[5]=i("p",{class:"text-sm text-gray-600 mt-1"},"Stay on top of pickups, deliveries, and any special actions required.",-1))]),i("div",Ot,[i("button",{class:"h-9 px-3 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 text-sm inline-flex items-center gap-2",onClick:ge},[(r(),le(Ie(y.value?p(ut):p(ct)),{class:"w-4 h-4"})),i("span",null,o(y.value?"Auto-assignment on":"Enable auto-assignment"),1)]),i("button",{class:"h-9 px-3 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 text-sm inline-flex items-center gap-2 text-red-700",onClick:me},[g(p(dt),{class:"w-4 h-4"}),t[6]||(t[6]=i("span",null,"SOS / Support",-1))]),i("button",{class:"h-9 px-3 rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 text-sm inline-flex items-center gap-2 text-blue-700",onClick:ee},[g(p(rt),{class:"w-4 h-4"}),t[7]||(t[7]=i("span",null,"Scan label / QR",-1))])])])]),q.value?(r(),d("section",jt,[i("div",zt,[g(p(it),{class:"w-4 h-4 mt-0.5"}),i("div",null,[t[8]||(t[8]=i("div",{class:"font-semibold"},"Assignments are unavailable",-1)),i("p",Bt,o(q.value)+". Showing sample assignments so you can preview the workflow. ",1)]),i("button",{class:"ml-auto text-xs text-amber-700 underline",onClick:t[0]||(t[0]=(...s)=>p(M)&&p(M)(...s))},"Retry")])])):x("",!0),i("section",Et,[i("div",Ft,[(r(!0),d(C,null,L(pe.value,s=>(r(),d("div",{key:s.label,class:"rounded-xl border bg-white px-4 py-3 shadow-sm"},[i("div",Vt,o(s.label),1),i("div",Rt,[i("span",qt,o(s.value),1),s.delta?(r(),d("span",{key:0,class:h(["text-xs",s.delta>0?"text-green-600":"text-gray-500"])},o(s.delta>0?`+${s.delta}`:s.delta),3)):x("",!0)]),i("p",It,o(s.caption),1)]))),128))])]),i("section",Wt,[i("div",Ht,[i("div",Ut,[(r(!0),d(C,null,L(re.value,s=>(r(),d("button",{key:s.id,class:h(["px-3 py-2 rounded-lg border text-sm inline-flex flex-col items-start gap-1 min-w-[160px]",a.value===s.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-200 hover:bg-blue-50/50"]),onClick:n=>E(s.id)},[i("span",Jt,[g(p(ot),{class:"w-3.5 h-3.5"}),v(" "+o(s.label),1)]),i("span",Kt,[g(p(ne),{class:"w-3 h-3"}),v(" "+o(s.time)+" - "+o(s.distance),1)]),i("div",Qt,[i("div",{class:"h-1 rounded-full bg-blue-500",style:Ge({width:s.progress+"%"})},null,4)])],10,Gt))),128))])])]),i("section",Xt,[i("div",Zt,[i("div",Yt,[(r(!0),d(C,null,L(ae.value,s=>(r(),d("div",{key:s.id,class:"rounded-xl border bg-white shadow-sm"},[i("header",ei,[i("div",ti,[i("span",{class:h(["h-2.5 w-2.5 rounded-full",s.dot])},null,2),i("h2",ii,o(s.label),1),i("span",si,"("+o(s.items.length)+")",1)])]),s.items.length?(r(),d("div",oi,[(r(!0),d(C,null,L(s.items,n=>(r(),d("article",{key:n.id,class:h(["px-4 py-4 space-y-3 cursor-pointer hover:bg-blue-50/40",a.value===n.id?"bg-blue-50/60":""]),onClick:c=>E(n.id)},[i("div",ai,[i("div",null,[i("div",ri,[g(p(Je),{class:"w-4 h-4"}),v(" "+o(n.pickupLabel),1)]),i("div",di,"to "+o(n.dropoffLabel),1),i("div",ci,[i("span",ui,[g(p(ne),{class:"w-3 h-3"}),v(" "+o(n.timeLabel),1)]),i("span",null,o(n.distanceLabel),1),i("span",pi,o(n.earningsLabel),1)])]),i("div",gi,[i("span",{class:h(["px-2 py-0.5 rounded-full text-xs font-medium",n.priorityBadge])},o(n.priorityLabel),3),i("button",{class:"text-xs text-blue-600 hover:underline",onClick:P(c=>he(n),["stop"])},"View details",8,mi)])]),i("div",fi,[i("div",null,[t[9]||(t[9]=i("div",{class:"font-medium text-gray-800"},"Pickup Window",-1)),i("div",null,o(n.pickupWindow),1)]),i("div",null,[t[10]||(t[10]=i("div",{class:"font-medium text-gray-800"},"Contact",-1)),i("div",null,o(n.contactName)+" · "+o(n.contactPhone),1)])]),i("div",vi,[i("button",{class:"h-8 px-3 text-xs rounded-lg border bg-white hover:bg-gray-50 inline-flex items-center gap-1",onClick:P(c=>fe(n),["stop"])},[g(p(at),{class:"w-3.5 h-3.5"}),t[11]||(t[11]=v(" Call ",-1))],8,xi),i("button",{class:"h-8 px-3 text-xs rounded-lg border bg-white hover:bg-gray-50 inline-flex items-center gap-1",onClick:P(c=>ve(n),["stop"])},[g(p(Ke),{class:"w-3.5 h-3.5"}),t[12]||(t[12]=v(" Message ",-1))],8,bi),n.localPicked?x("",!0):(r(),d("button",{key:0,class:"h-8 px-3 text-xs rounded-lg bg-green-600 text-white hover:bg-green-700 inline-flex items-center gap-1",onClick:P(c=>xe(n),["stop"])},[g(p(nt),{class:"w-3.5 h-3.5"}),t[13]||(t[13]=v(" Picked up ",-1))],8,hi)),i("button",{class:"h-8 px-3 text-xs rounded-lg bg-blue-600 text-white hover:bg-blue-700 inline-flex items-center gap-1",onClick:P(c=>be(n),["stop"])},[g(p(lt),{class:"w-3.5 h-3.5"}),t[14]||(t[14]=v(" Navigate ",-1))],8,_i)])],10,li))),128))])):(r(),d("div",ni,"Nothing here right now."))]))),128))]),i("div",yi,[i("div",ki,[i("div",wi,[i("div",$i,[g(p(st),{class:"w-4 h-4"}),t[15]||(t[15]=v(" Live Route Map ",-1))]),t[16]||(t[16]=i("span",{class:"text-xs text-gray-500"},"Auto-focused on selected assignment",-1))]),g(Ze,{center:de.value,markers:D.value,"open-marker-id":a.value,height:"320px"},null,8,["center","markers","open-marker-id"])]),i("div",Ci,[i("button",{class:"w-full px-4 py-3 border-b flex items-center justify-between text-sm font-semibold text-gray-800",onClick:t[1]||(t[1]=s=>u.value=!u.value)},[i("span",Li,[g(p(We),{class:"w-4 h-4"}),t[17]||(t[17]=v(" Micro Tasks ",-1))]),i("span",Si,o(ue.value)+"/"+o(W.value.length)+" done",1)]),u.value?(r(),d("div",Ai,[(r(!0),d(C,null,L(W.value,s=>(r(),d("div",{key:s.id,class:"px-4 py-3 flex items-center justify-between gap-3 text-sm"},[i("div",Mi,[i("span",Ti,o(s.label),1),i("span",Di,o(s.assignmentLabel)+" · "+o(s.dueLabel),1)]),i("button",{class:h(["h-7 w-7 rounded-full border flex items-center justify-center",s.completed?"bg-green-500 border-green-500 text-white":"bg-white hover:bg-gray-50 text-gray-600"]),onClick:n=>_e(s.assignmentId,s.id)},[g(p(Ye),{class:"w-4 h-4"})],10,Ni)]))),128))])):x("",!0)]),i("div",Pi,[i("header",Oi,[t[19]||(t[19]=i("span",{class:"text-sm font-semibold text-gray-800"},"Timeline & Activity",-1)),He(i("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value=s),class:"h-8 px-2 text-xs border rounded"},[...t[18]||(t[18]=[i("option",{value:"all"},"All",-1),i("option",{value:"ready"},"Ready for pickup",-1),i("option",{value:"in_transit"},"In transit",-1),i("option",{value:"needs_action"},"Needs action",-1)])],512),[[Ue,l.value]])]),i("ol",ji,[(r(!0),d(C,null,L(Y.value,s=>(r(),d("li",{key:s.id,class:"flex gap-3"},[i("div",zi,[i("span",{class:h(["h-2.5 w-2.5 rounded-full inline-block",s.color])},null,2)]),i("div",null,[i("div",Bi,o(s.title),1),i("div",Ei,o(s.timestamp)+" · "+o(s.assignmentLabel),1),i("p",Fi,o(s.description),1)])]))),128)),Y.value.length?x("",!0):(r(),d("li",Vi,"No events for this filter."))])])])])]),g(Mt,{open:V.value,packages:X.value?.packages||[],"assignment-id":X.value?.id,onClose:t[3]||(t[3]=s=>V.value=!1),onScan:ee},null,8,["open","packages","assignment-id"])]))}});export{Ji as default};
