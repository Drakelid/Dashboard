import{s as P,d as oe,c as m,l as le,a as r,b,e as i,t as o,L as g,u as p,F as $,x as C,R as Ve,y as _,o as a,r as S,m as Re,S as G,i as qe,K as Ie,G as se,M as x,A as We,a1 as He,j as Ue,a2 as Ge,Z as w,z as Je,T as Ke,w as N,a3 as Qe,n as Xe}from"./index-BuxYn20U.js";import{g as Ze,S as Ye,C as et}from"./geocode-BLlg9aTY.js";import{X as tt}from"./x-DdxcIu4j.js";import{C as it,T as st}from"./triangle-alert-pxBwXuOY.js";import{M as nt,C as ne,P as ot}from"./package-jhO3ye1D.js";import{M as lt,N as at}from"./navigation-CqTGUV1U.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=P("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=P("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=P("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=P("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=P("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),gt={key:0,class:"fixed inset-0 z-[1200]"},mt={class:"absolute inset-0 flex items-center justify-center p-4"},vt={class:"w-full max-w-xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/10 overflow-hidden"},ft={class:"px-4 py-3 border-b flex items-center justify-between"},xt={key:0,class:"text-xs text-gray-500"},bt={class:"max-h-[60vh] overflow-y-auto divide-y"},ht={key:0,class:"px-4 py-6 text-sm text-gray-500"},_t={class:"flex items-center justify-between"},yt={class:"text-sm font-semibold"},kt={class:"grid grid-cols-2 gap-3 text-xs text-gray-600"},wt={class:"capitalize"},$t={class:"text-xs text-gray-600"},Ct={class:"list-disc ml-4 space-y-0.5"},Lt={key:0},St={key:1},At={key:2},Mt={class:"px-4 py-3 border-t flex items-center justify-end gap-2"},Tt=oe({__name:"AssignmentPackageModal",props:{open:{type:Boolean},packages:{},assignmentId:{}},emits:["close","scan"],setup(J,{emit:O}){const j=J,L=O,z=m(()=>j.packages||[]),A=m(()=>j.assignmentId);function F(u){if(!u.weight)return"-";const l=u.weight_unit||"kg";return`${u.weight} ${l}`}function M(u){if(!u.length||!u.width||!u.height)return"-";const l=u.dimension_unit||"cm";return`${u.length}x${u.width}x${u.height} ${l}`}function B(u){const l=u.temperature_unit||"C";return`${u.temperature_c} ${l}`}return(u,l)=>(a(),le(Ve,{to:"body"},[u.open?(a(),r("div",gt,[i("div",{class:"absolute inset-0 bg-black/40",onClick:l[0]||(l[0]=d=>L("close"))}),i("div",mt,[i("section",vt,[i("header",ft,[i("div",null,[l[4]||(l[4]=i("h3",{class:"text-lg font-semibold"},"Package Details",-1)),A.value?(a(),r("p",xt,"Assignment #"+o(A.value),1)):b("",!0)]),i("button",{class:"h-8 w-8 rounded-full hover:bg-gray-100 grid place-items-center",onClick:l[1]||(l[1]=d=>L("close")),"aria-label":"Close"},[g(p(tt),{class:"w-4 h-4"})])]),i("div",bt,[z.value.length?b("",!0):(a(),r("div",ht,"No package details available.")),(a(!0),r($,null,C(z.value,d=>(a(),r("article",{key:d.id??d.description,class:"px-4 py-3 space-y-2"},[i("div",_t,[i("div",yt,"Package "+o(d.id??"unknown"),1),i("span",{class:_(["text-xs px-2 py-0.5 rounded-full",d.hazardous?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"])},o(d.hazardous?"Hazardous":"Eco"),3)]),i("div",kt,[i("div",null,[l[5]||(l[5]=i("div",{class:"font-medium text-gray-800"},"Description",-1)),i("div",null,o(d.description||"-"),1)]),i("div",null,[l[6]||(l[6]=i("div",{class:"font-medium text-gray-800"},"Weight",-1)),i("div",null,o(F(d)),1)]),i("div",null,[l[7]||(l[7]=i("div",{class:"font-medium text-gray-800"},"Dimensions",-1)),i("div",null,o(M(d)),1)]),i("div",null,[l[8]||(l[8]=i("div",{class:"font-medium text-gray-800"},"Status",-1)),i("div",wt,o((d.delivery_status||"pending").replace(/_/g," ")),1)])]),i("div",$t,[l[9]||(l[9]=i("div",{class:"font-medium text-gray-800 mb-1"},"Handling",-1)),i("ul",Ct,[d.fragile?(a(),r("li",Lt,"Fragile - handle with care")):b("",!0),d.temperature_c?(a(),r("li",St,"Temperature sensitive: "+o(B(d)),1)):b("",!0),!d.fragile&&!d.temperature_c?(a(),r("li",At,"No special handling notes.")):b("",!0)])])]))),128))]),i("footer",Mt,[i("button",{class:"h-9 px-3 text-sm rounded border bg-white hover:bg-gray-50",onClick:l[2]||(l[2]=d=>L("close"))}," Close "),i("button",{class:"h-9 px-3 text-sm rounded bg-blue-600 text-white hover:bg-blue-700",onClick:l[3]||(l[3]=d=>L("scan"))}," Scan & Confirm ")])])])])):b("",!0)]))}}),Dt={class:"space-y-6 pb-12"},Nt={class:"sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-gray-200/60"},Pt={class:"px-4 md:px-6 py-4 flex flex-wrap items-center justify-between gap-4"},Ot={class:"flex items-center gap-3"},jt={class:"flex items-center gap-2 flex-wrap"},zt={key:0,class:"px-4 md:px-6"},Bt={class:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800 flex items-start gap-3"},Et={class:"mt-0.5"},Ft={class:"px-4 md:px-6"},Vt={class:"grid gap-3 md:grid-cols-4"},Rt={class:"text-xs uppercase tracking-wide text-gray-500"},qt={class:"mt-1 flex items-baseline gap-2"},It={class:"text-xl font-semibold text-gray-900"},Wt={class:"text-xs text-gray-500 mt-1"},Ht={class:"px-4 md:px-6"},Ut={class:"rounded-xl border bg-white shadow-sm px-4 py-3 overflow-x-auto"},Gt={class:"flex items-center gap-3 min-w-max"},Jt=["onClick"],Kt={class:"font-medium flex items-center gap-1"},Qt={class:"text-xs text-gray-500 flex items-center gap-2"},Xt={class:"w-full h-1 rounded-full bg-gray-200"},Zt={class:"px-4 md:px-6"},Yt={class:"grid gap-4 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]"},ei={class:"space-y-4"},ti={class:"px-4 py-3 border-b flex items-center justify-between"},ii={class:"flex items-center gap-2"},si={class:"text-sm font-semibold text-gray-800"},ni={class:"text-xs text-gray-500"},oi={key:0,class:"px-4 py-6 text-sm text-gray-500"},li={key:1,class:"divide-y"},ai=["onClick"],ri={class:"flex items-start justify-between gap-3"},di={class:"flex items-center gap-2 text-sm font-semibold text-gray-900"},ci={class:"text-xs text-gray-500"},ui={class:"mt-1 flex items-center gap-3 text-xs text-gray-500"},pi={class:"inline-flex items-center gap-1"},gi={class:"font-medium text-green-700"},mi={class:"flex flex-col items-end gap-1 text-xs text-gray-500"},vi=["onClick"],fi={class:"grid md:grid-cols-2 gap-3 text-xs text-gray-600"},xi={class:"flex items-center gap-2"},bi=["onClick"],hi=["onClick"],_i=["onClick"],yi=["onClick"],ki={class:"space-y-4"},wi={class:"rounded-xl border bg-white shadow-sm overflow-hidden"},$i={class:"px-4 py-3 border-b flex items-center justify-between"},Ci={class:"flex items-center gap-2 text-sm font-semibold text-gray-800"},Li={class:"rounded-xl border bg-white shadow-sm overflow-hidden"},Si={class:"inline-flex items-center gap-2"},Ai={class:"text-xs text-gray-500"},Mi={key:0,class:"max-h-64 overflow-y-auto divide-y"},Ti={class:"flex flex-col"},Di={class:"font-medium text-gray-800"},Ni={class:"text-xs text-gray-500"},Pi=["onClick"],Oi={class:"rounded-xl border bg-white shadow-sm"},ji={class:"px-4 py-3 border-b flex items-center justify-between"},zi={class:"px-4 py-3 space-y-3 text-sm"},Bi={class:"mt-1"},Ei={class:"font-medium text-gray-900"},Fi={class:"text-xs text-gray-500"},Vi={class:"text-xs text-gray-600 mt-1"},Ri={key:0,class:"text-xs text-gray-500"},Ki=oe({__name:"AssignmentsView",setup(J){const{future:O,loading:j,error:L,loadFuture:z,refresh:A}=Ie(),F=Xe(),M=Re(),B=S(!0),u=S(!0),l=S(!0),d=S("all"),f=S(M.query.focus||null),V=S(!1),K=G({}),R=G({});qe(()=>{O.value||z().catch(()=>{})}),se(()=>M.query.focus,e=>{typeof e=="string"&&E(e)});const q=m(()=>L.value||null),I=je(),ae=m(()=>{const e=O.value;return e&&e.length?e:(j.value||q.value,I)}),h=m(()=>ae.value.map((e,t)=>ke(e,t)));se(h,e=>{if(!e.length){f.value=null;return}f.value&&e.some(t=>t.id===f.value)||(f.value=e[0].id)},{immediate:!0});const Q=m(()=>h.value.find(e=>e.id===f.value)||null),re=m(()=>{const e=[{id:"ready",label:"Ready for pickup",dot:"bg-blue-500",items:[]},{id:"in_transit",label:"In transit",dot:"bg-amber-500",items:[]},{id:"needs_action",label:"Needs attention",dot:"bg-red-500",items:[]}];for(const t of h.value){const s=e.find(n=>n.id===t.status);s&&s.items.push(t)}return e}),de=m(()=>h.value.map((e,t,s)=>({id:e.id,label:e.dropoffLabel,time:e.timeLabel,distance:e.distanceLabel,progress:s.length<=1?100:Math.round(t/(s.length-1)*100)}))),T=m(()=>h.value.map(e=>({id:e.id,lat:e.coordinates.lat,lng:e.coordinates.lng,label:`${e.dropoffLabel}
${e.timeLabel}`,kind:e.status==="needs_action"?"nearby":"job",color:e.status==="needs_action"?"#f97316":e.status==="in_transit"?"#2563eb":"#16a34a"}))),ce=m(()=>{const e=T.value.find(t=>t.id===f.value);return e?{lat:e.lat,lng:e.lng}:T.value[0]?{lat:T.value[0].lat,lng:T.value[0].lng}:{lat:59.9139,lng:10.7522}}),ue=m(()=>{const e=h.value[0];return e?e.timeLabel:"No assignments queued"}),D=G(new Map),W=m(()=>{const e=[];for(const t of h.value)for(const s of t.tasks){D.get(t.id)||D.set(t.id,{});const n=D.get(t.id)[s.id]||!1;e.push({id:s.id,label:s.label,dueLabel:s.dueLabel,assignmentId:t.id,assignmentLabel:t.dropoffLabel,completed:n})}return e}),pe=m(()=>W.value.filter(e=>e.completed).length),X=m(()=>{const e=[];for(const t of h.value)e.push(...t.timeline);return e.sort((t,s)=>t.sortOrder-s.sortOrder)}),Z=m(()=>d.value==="all"?X.value:X.value.filter(e=>e.status===d.value)),ge=m(()=>{const e=h.value,t=e.length,s=e.filter(v=>v.status==="ready").length,n=e.filter(v=>v.status==="in_transit").length,c=e.reduce((v,k)=>v+(k.earningsValue||0),0),y=e.reduce((v,k)=>v+k.ecoPackages,0);return[{label:"Assignments queued",value:t,delta:s,caption:`${s} ready for pickup`},{label:"In transit",value:n,delta:0,caption:"Deliveries currently on the road"},{label:"Earnings today",value:ee(c),delta:e.filter(v=>v.completed).length,caption:"Including bonuses"},{label:"Eco packages",value:y,delta:0,caption:"Packages marked eco-friendly"}]});function E(e){f.value=e,F.replace({query:{...M.query,focus:e}})}function me(){u.value=!u.value,w.info(u.value?"Auto-assignment enabled":"Auto-assignment disabled")}function ve(){w.error("Support has been notified. Stay safe!")}function Y(){w.success("Opening scanner…")}function fe(e){w.info(`Dialing ${e.contactPhone}`)}function xe(e){w.info(`Starting chat with ${e.contactName}`)}function be(e){K[e.id]=!0,w.success(`Marked assignment #${e.id} as picked up`)}function he(e){w.info(`Starting navigation to ${e.dropoffLabel}`)}function _e(e){E(e.id),V.value=!0}function ye(e,t){const s=D.get(e)||{};s[t]=!s[t],D.set(e,s)}function ee(e){return e?`kr ${Math.round(e).toLocaleString()}`:"kr 0"}function ke(e,t){const s=String(e.delivery?.id??e.delivery?.uuid??`assignment-${t+1}`),n=we(e),c=$e(e),y=e.packages||[],v=y.filter(U=>!U.hazardous).length,k=Ce(e),ze=Ae(e),Be=Me(s,e,t),Ee=Pe(s,n),Fe=Oe(s,e,n),ie=!!K[s];return{id:s,original:e,status:ie&&n==="ready"?"in_transit":n,priority:c,priorityBadge:c==="urgent"?"bg-red-100 text-red-700":c==="express"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",priorityLabel:c==="standard"?"Standard":c==="express"?"Express":"Urgent",pickupLabel:e.pickup_location||e.delivery?.pickup_location||"Pickup TBD",dropoffLabel:e.delivery?.delivery_location||e.location||"Destination TBD",packages:y,ecoPackages:v,earningsValue:k,earningsLabel:k?ee(k):"kr 0",timeLabel:Le(e)||"Time TBD",distanceLabel:Se(e)||"Distance TBD",pickupWindow:ze,contactName:e.delivery?.receiver?.name||e.actor?.name||"Recipient",contactPhone:e.delivery?.receiver?.phone||e.actor?.phone||"N/A",coordinates:Be,tasks:Ee,timeline:Fe,completed:y.every(U=>(U.delivery_status||"").toLowerCase().includes("delivered")),localPicked:ie}}function we(e){const t=(e.packages||[]).map(s=>(s.delivery_status||"").toLowerCase());return t.some(s=>s.includes("delayed")||s.includes("exception"))?"needs_action":t.some(s=>s.includes("picked")||s.includes("transit"))?"in_transit":"ready"}function $e(e){const t=(e.delivery?.service||"").toLowerCase();return t.includes("express")||t.includes("same day")?"express":(e.packages||[]).some(s=>s.fragile||s.hazardous)?"urgent":"standard"}function Ce(e){const t=e.delivery,s=[t?.fee,t?.price,t?.total_price,t?.delivery_fee];for(const n of s){if(n==null)continue;const c=typeof n=="number"?n:parseFloat(String(n));if(Number.isFinite(c))return c}return 0}function Le(e){const t=e.pickup_time||e.delivery?.pickup_time||e.delivery?.delivery_time;return t?t.slice(0,5):null}function Se(e){const t=e?.distance_km||e?.distance;if(!t)return null;const s=typeof t=="number"?t:parseFloat(String(t));return Number.isFinite(s)?`${s.toFixed(1)} km`:null}function Ae(e){const t=e.pickup_date||e.delivery?.pickup_date,s=e.pickup_time||e.delivery?.pickup_time;if(!t&&!s)return"Window pending";if(!t)return`At ${s?.slice(0,5)}`;const n=new Date(`${t}T${s||"00:00:00"}`);return Number.isNaN(n.getTime())?`${t} ${s||""}`.trim():`${n.toLocaleDateString()} - ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}const H=new Set;function Me(e,t,s){const n=R[e];if(n)return n;const c=Te(t);return c?(R[e]=c,c):(H.has(e)||(H.add(e),De(e,t).finally(()=>H.delete(e))),Ne(s))}function Te(e){const t=[],s=e,n=e.delivery||{};t.push({lat:s.delivery_latitude,lng:s.delivery_longitude}),t.push({lat:s.pickup_latitude,lng:s.pickup_longitude}),t.push({lat:n.delivery_latitude,lng:n.delivery_longitude}),t.push({lat:n.pickup_latitude,lng:n.pickup_longitude}),t.push({lat:s.latitude,lng:s.longitude});for(const c of t){const y=te(c.lat),v=te(c.lng);if(y!=null&&v!=null)return{lat:y,lng:v}}return null}async function De(e,t){const s=t.delivery?.delivery_location||t.location||t.pickup_location;if(!s)return;const n=await Ze(s);n&&(R[e]=n)}function Ne(e){const n=e*.003;return{lat:59.9139+n,lng:10.7522+n}}function te(e){if(e==null)return null;if(typeof e=="number")return Number.isFinite(e)?e:null;const t=parseFloat(String(e));return Number.isFinite(t)?t:null}function Pe(e,t){const s=[{id:`${e}-verify-id`,label:"Verify recipient ID",dueLabel:"Before delivery"},{id:`${e}-collect-signature`,label:"Collect signature",dueLabel:"At drop-off"},{id:`${e}-photo-proof`,label:"Photo proof of delivery",dueLabel:"After drop-off"}];return t==="ready"&&s.unshift({id:`${e}-inspect-package`,label:"Inspect package condition",dueLabel:"At pickup"}),s}function Oe(e,t,s){const n=new Date;return[{id:`${e}-created`,title:"Assignment created",description:`New assignment scheduled for ${t.delivery?.delivery_location||"destination"}.`,timestamp:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:s,color:"bg-blue-500",assignmentLabel:t.delivery?.delivery_location||t.location||e,sortOrder:n.getTime()-3e5},{id:`${e}-reminder`,title:s==="ready"?"Pickup window approaching":"Keep driving",description:s==="ready"?"Head to pickup location within the next 15 minutes.":"Continue to destination, traffic looks clear ahead.",timestamp:new Date(n.getTime()+6e5).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:s,color:s==="needs_action"?"bg-red-500":s==="in_transit"?"bg-amber-500":"bg-blue-500",assignmentLabel:t.delivery?.delivery_location||t.location||e,sortOrder:n.getTime()+6e5}]}function je(){const t=new Date().toISOString().slice(0,10);return[{type:"delivery",delivery:{id:5012,pickup_location:"SamBring Logistics Hub",delivery_location:"Fjordgata 12, Oslo",receiver:{name:"Alex Johnson",phone:"+47 998 88 776"},service:"standard",pickup_date:t,pickup_time:"09:30:00",delivery_date:t,delivery_time:"10:15:00",pickup_latitude:59.9096,pickup_longitude:10.7449,delivery_latitude:59.9187,delivery_longitude:10.7523},packages:[{id:9101,description:"Organic produce crate",weight:4.5,weight_unit:"kg",length:40,width:35,height:25,dimension_unit:"cm",hazardous:!1,fragile:!0,delivery_status:"ready_for_pickup"}],location:"Fjordgata 12, Oslo",date:t,time:"10:15:00",pickup_location:"SamBring Logistics Hub",pickup_date:t,pickup_time:"09:30:00",pickup_latitude:59.9096,pickup_longitude:10.7449,delivery_latitude:59.9187,delivery_longitude:10.7523,actor:{name:"Alex Johnson",phone:"+47 998 88 776"},actor_type:"receiver",is_delivered:!1},{type:"delivery",delivery:{id:5013,pickup_location:"Eco Market Warehouse",delivery_location:"Nordveien 22, Oslo",receiver:{name:"Maria Berg",phone:"+47 990 11 223"},service:"express",pickup_date:t,pickup_time:"11:00:00",delivery_date:t,delivery_time:"11:30:00",pickup_latitude:59.921,pickup_longitude:10.761,delivery_latitude:59.9265,delivery_longitude:10.7531},packages:[{id:9102,description:"Medical supplies",weight:2.1,weight_unit:"kg",length:30,width:25,height:20,dimension_unit:"cm",hazardous:!1,fragile:!1,delivery_status:"picked_up"}],location:"Nordveien 22, Oslo",date:t,time:"11:30:00",pickup_location:"Eco Market Warehouse",pickup_date:t,pickup_time:"11:00:00",pickup_latitude:59.921,pickup_longitude:10.761,delivery_latitude:59.9265,delivery_longitude:10.7531,actor:{name:"Maria Berg",phone:"+47 990 11 223"},actor_type:"receiver",is_delivered:!1},{type:"delivery",delivery:{id:5014,pickup_location:"Downtown Electronics",delivery_location:"Storgata 84, Oslo",receiver:{name:"Leif Andersen",phone:"+47 955 44 332"},service:"same day",pickup_date:t,pickup_time:"13:15:00",delivery_date:t,delivery_time:"14:00:00",pickup_latitude:59.9175,pickup_longitude:10.733,delivery_latitude:59.9121,delivery_longitude:10.7608},packages:[{id:9103,description:"Refurbished laptop",weight:1.7,weight_unit:"kg",length:35,width:25,height:5,dimension_unit:"cm",hazardous:!1,fragile:!0,delivery_status:"in_transit"}],location:"Storgata 84, Oslo",date:t,time:"14:00:00",pickup_location:"Downtown Electronics",pickup_date:t,pickup_time:"13:15:00",pickup_latitude:59.9175,pickup_longitude:10.733,delivery_latitude:59.9121,delivery_longitude:10.7608,actor:{name:"Leif Andersen",phone:"+47 955 44 332"},actor_type:"receiver",is_delivered:!1}]}return(e,t)=>(a(),r("section",Dt,[i("header",Nt,[i("div",Pt,[i("div",null,[i("div",Ot,[t[4]||(t[4]=i("h1",{class:"text-2xl font-semibold text-gray-900"},"Assignments",-1)),i("span",{class:_(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium",B.value?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"])},[g(p(it),{class:"w-3.5 h-3.5"}),x(" "+o(B.value?"Online":"Offline")+" - "+o(ue.value),1)],2)]),t[5]||(t[5]=i("p",{class:"text-sm text-gray-600 mt-1"},"Stay on top of pickups, deliveries, and any special actions required.",-1))]),i("div",jt,[i("button",{class:"h-9 px-3 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 text-sm inline-flex items-center gap-2",onClick:me},[(a(),le(We(u.value?p(pt):p(ut)),{class:"w-4 h-4"})),i("span",null,o(u.value?"Auto-assignment on":"Enable auto-assignment"),1)]),i("button",{class:"h-9 px-3 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 text-sm inline-flex items-center gap-2 text-red-700",onClick:ve},[g(p(ct),{class:"w-4 h-4"}),t[6]||(t[6]=i("span",null,"SOS / Support",-1))]),i("button",{class:"h-9 px-3 rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 text-sm inline-flex items-center gap-2 text-blue-700",onClick:Y},[g(p(dt),{class:"w-4 h-4"}),t[7]||(t[7]=i("span",null,"Scan label / QR",-1))])])])]),q.value?(a(),r("section",zt,[i("div",Bt,[g(p(st),{class:"w-4 h-4 mt-0.5"}),i("div",null,[t[8]||(t[8]=i("div",{class:"font-semibold"},"Assignments are unavailable",-1)),i("p",Et,o(q.value)+". Showing sample assignments so you can preview the workflow. ",1)]),i("button",{class:"ml-auto text-xs text-amber-700 underline",onClick:t[0]||(t[0]=(...s)=>p(A)&&p(A)(...s))},"Retry")])])):b("",!0),i("section",Ft,[i("div",Vt,[(a(!0),r($,null,C(ge.value,s=>(a(),r("div",{key:s.label,class:"rounded-xl border bg-white px-4 py-3 shadow-sm"},[i("div",Rt,o(s.label),1),i("div",qt,[i("span",It,o(s.value),1),s.delta?(a(),r("span",{key:0,class:_(["text-xs",s.delta>0?"text-green-600":"text-gray-500"])},o(s.delta>0?`+${s.delta}`:s.delta),3)):b("",!0)]),i("p",Wt,o(s.caption),1)]))),128))])]),i("section",Ht,[i("div",Ut,[i("div",Gt,[(a(!0),r($,null,C(de.value,s=>(a(),r("button",{key:s.id,class:_(["px-3 py-2 rounded-lg border text-sm inline-flex flex-col items-start gap-1 min-w-[160px]",f.value===s.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-200 hover:bg-blue-50/50"]),onClick:n=>E(s.id)},[i("span",Kt,[g(p(lt),{class:"w-3.5 h-3.5"}),x(" "+o(s.label),1)]),i("span",Qt,[g(p(ne),{class:"w-3 h-3"}),x(" "+o(s.time)+" - "+o(s.distance),1)]),i("div",Xt,[i("div",{class:"h-1 rounded-full bg-blue-500",style:Je({width:s.progress+"%"})},null,4)])],10,Jt))),128))])])]),i("section",Zt,[i("div",Yt,[i("div",ei,[(a(!0),r($,null,C(re.value,s=>(a(),r("div",{key:s.id,class:"rounded-xl border bg-white shadow-sm"},[i("header",ti,[i("div",ii,[i("span",{class:_(["h-2.5 w-2.5 rounded-full",s.dot])},null,2),i("h2",si,o(s.label),1),i("span",ni,"("+o(s.items.length)+")",1)])]),s.items.length?(a(),r("div",li,[(a(!0),r($,null,C(s.items,n=>(a(),r("article",{key:n.id,class:_(["px-4 py-4 space-y-3 cursor-pointer hover:bg-blue-50/40",f.value===n.id?"bg-blue-50/60":""]),onClick:c=>E(n.id)},[i("div",ri,[i("div",null,[i("div",di,[g(p(Ke),{class:"w-4 h-4"}),x(" "+o(n.pickupLabel),1)]),i("div",ci,"to "+o(n.dropoffLabel),1),i("div",ui,[i("span",pi,[g(p(ne),{class:"w-3 h-3"}),x(" "+o(n.timeLabel),1)]),i("span",null,o(n.distanceLabel),1),i("span",gi,o(n.earningsLabel),1)])]),i("div",mi,[i("span",{class:_(["px-2 py-0.5 rounded-full text-xs font-medium",n.priorityBadge])},o(n.priorityLabel),3),i("button",{class:"text-xs text-blue-600 hover:underline",onClick:N(c=>_e(n),["stop"])},"View details",8,vi)])]),i("div",fi,[i("div",null,[t[9]||(t[9]=i("div",{class:"font-medium text-gray-800"},"Pickup Window",-1)),i("div",null,o(n.pickupWindow),1)]),i("div",null,[t[10]||(t[10]=i("div",{class:"font-medium text-gray-800"},"Contact",-1)),i("div",null,o(n.contactName)+" · "+o(n.contactPhone),1)])]),i("div",xi,[i("button",{class:"h-8 px-3 text-xs rounded-lg border bg-white hover:bg-gray-50 inline-flex items-center gap-1",onClick:N(c=>fe(n),["stop"])},[g(p(rt),{class:"w-3.5 h-3.5"}),t[11]||(t[11]=x(" Call ",-1))],8,bi),i("button",{class:"h-8 px-3 text-xs rounded-lg border bg-white hover:bg-gray-50 inline-flex items-center gap-1",onClick:N(c=>xe(n),["stop"])},[g(p(Qe),{class:"w-3.5 h-3.5"}),t[12]||(t[12]=x(" Message ",-1))],8,hi),n.localPicked?b("",!0):(a(),r("button",{key:0,class:"h-8 px-3 text-xs rounded-lg bg-green-600 text-white hover:bg-green-700 inline-flex items-center gap-1",onClick:N(c=>be(n),["stop"])},[g(p(ot),{class:"w-3.5 h-3.5"}),t[13]||(t[13]=x(" Picked up ",-1))],8,_i)),i("button",{class:"h-8 px-3 text-xs rounded-lg bg-blue-600 text-white hover:bg-blue-700 inline-flex items-center gap-1",onClick:N(c=>he(n),["stop"])},[g(p(at),{class:"w-3.5 h-3.5"}),t[14]||(t[14]=x(" Navigate ",-1))],8,yi)])],10,ai))),128))])):(a(),r("div",oi,"Nothing here right now."))]))),128))]),i("div",ki,[i("div",wi,[i("div",$i,[i("div",Ci,[g(p(nt),{class:"w-4 h-4"}),t[15]||(t[15]=x(" Live Route Map ",-1))]),t[16]||(t[16]=i("span",{class:"text-xs text-gray-500"},"Auto-focused on selected assignment",-1))]),g(Ye,{center:ce.value,markers:T.value,"open-marker-id":f.value,height:"320px"},null,8,["center","markers","open-marker-id"])]),i("div",Li,[i("button",{class:"w-full px-4 py-3 border-b flex items-center justify-between text-sm font-semibold text-gray-800",onClick:t[1]||(t[1]=s=>l.value=!l.value)},[i("span",Si,[g(p(He),{class:"w-4 h-4"}),t[17]||(t[17]=x(" Micro Tasks ",-1))]),i("span",Ai,o(pe.value)+"/"+o(W.value.length)+" done",1)]),l.value?(a(),r("div",Mi,[(a(!0),r($,null,C(W.value,s=>(a(),r("div",{key:s.id,class:"px-4 py-3 flex items-center justify-between gap-3 text-sm"},[i("div",Ti,[i("span",Di,o(s.label),1),i("span",Ni,o(s.assignmentLabel)+" · "+o(s.dueLabel),1)]),i("button",{class:_(["h-7 w-7 rounded-full border flex items-center justify-center",s.completed?"bg-green-500 border-green-500 text-white":"bg-white hover:bg-gray-50 text-gray-600"]),onClick:n=>ye(s.assignmentId,s.id)},[g(p(et),{class:"w-4 h-4"})],10,Pi)]))),128))])):b("",!0)]),i("div",Oi,[i("header",ji,[t[19]||(t[19]=i("span",{class:"text-sm font-semibold text-gray-800"},"Timeline & Activity",-1)),Ue(i("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),class:"h-8 px-2 text-xs border rounded"},[...t[18]||(t[18]=[i("option",{value:"all"},"All",-1),i("option",{value:"ready"},"Ready for pickup",-1),i("option",{value:"in_transit"},"In transit",-1),i("option",{value:"needs_action"},"Needs action",-1)])],512),[[Ge,d.value]])]),i("ol",zi,[(a(!0),r($,null,C(Z.value,s=>(a(),r("li",{key:s.id,class:"flex gap-3"},[i("div",Bi,[i("span",{class:_(["h-2.5 w-2.5 rounded-full inline-block",s.color])},null,2)]),i("div",null,[i("div",Ei,o(s.title),1),i("div",Fi,o(s.timestamp)+" · "+o(s.assignmentLabel),1),i("p",Vi,o(s.description),1)])]))),128)),Z.value.length?b("",!0):(a(),r("li",Ri,"No events for this filter."))])])])])]),g(Tt,{open:V.value,packages:Q.value?.packages||[],"assignment-id":Q.value?.id,onClose:t[3]||(t[3]=s=>V.value=!1),onScan:Y},null,8,["open","packages","assignment-id"])]))}});export{Ki as default};
