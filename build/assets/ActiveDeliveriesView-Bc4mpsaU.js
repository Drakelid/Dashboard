import{u as re,_ as de}from"./useDriverDeliveries-0kGFN-yu.js";import{j as te,d as W,J as n,c as T,K as ce,a as e,b as se,e as d,F as ue,t as x,o as P,r as U,A as pe,z as oe,f as fe,I as Y,H as _,T as he,L as me,N as xe,y as ve}from"./index-Cp0ke4Zo.js";import{X as Z}from"./x-DrUbxQiZ.js";import{C as ge}from"./check-DGkWx4Pq.js";import"./Spinner.vue_vue_type_script_setup_true_lang-BuBg_F9-.js";import"./driver-ByB8mxg_.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=te("alarm-clock",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=te("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),be=["viewBox"],we=["id"],ke=["stop-color"],$e=["stop-color"],Me=["stop-color"],qe=["id"],Se=["stop-color"],ze=["stop-color"],De=["stop-color"],Ve=["id"],Ce=["stop-color"],Le=["stop-color"],Fe=["stop-color"],Ge=["id"],Pe=["id"],Ae=["d","fill","filter"],Be=["d","fill","stroke"],Ee=["d","fill","stroke"],Ne=["d","fill","stroke"],je={stroke:"rgba(255,255,255,0.4)","stroke-width":"1.2","stroke-linecap":"round",fill:"none"},Re=["x2"],Te=["x1","x2","y2"],Ie=["x2","y2"],Ke=["y2"],He=["x1","x2","y2"],Oe=["x1","y1","x2","y2"],Ue=["x","y"],We=["x","y","transform"],Je=["y","transform"],Qe=.8,Xe=.6,C=6,Ye=.2,Ze=W({__name:"IsometricPackageBox",props:{dimensions:{},weight:{},showDimensions:{type:Boolean,default:!0},size:{default:"medium"}},setup(q){const f=q,l=Math.random().toString(36).slice(2,9),g={small:{baseSize:60,iconSize:12,textSize:"text-xs",minSize:20},medium:{baseSize:80,iconSize:16,textSize:"text-sm",minSize:25},large:{baseSize:120,iconSize:20,textSize:"text-base",minSize:30}},v=n(()=>g[f.size]),b=n(()=>Math.max(f.dimensions.length,f.dimensions.width,f.dimensions.height)),S=n(()=>f.dimensions.length/b.value),$=n(()=>f.dimensions.width/b.value),L=n(()=>f.dimensions.height/b.value),o=n(()=>Math.round(v.value.baseSize*S.value)),M=n(()=>Math.round(v.value.baseSize*$.value)),t=n(()=>Math.round(v.value.baseSize*L.value)),c=n(()=>Math.round(M.value*Qe)),u=n(()=>Math.round(M.value*Xe)),I=n(()=>[{x:0,y:t.value},{x:o.value,y:t.value},{x:o.value,y:0},{x:0,y:0}]),i=n(()=>[{x:o.value,y:t.value},{x:o.value+c.value,y:t.value-u.value},{x:o.value+c.value,y:-u.value},{x:o.value,y:0}]),s=n(()=>[{x:0,y:0},{x:o.value,y:0},{x:o.value+c.value,y:-u.value},{x:c.value,y:-u.value}]),F=n(()=>[{x:0+.3*t.value,y:t.value+C},{x:o.value+.3*t.value,y:t.value+C},{x:o.value+c.value+.3*t.value,y:t.value-u.value+C},{x:c.value+.3*t.value,y:t.value-u.value+C}]),w=n(()=>o.value+c.value+10),K=n(()=>t.value+u.value+C+10),A=n(()=>`-5 ${-u.value-5} ${w.value} ${K.value+C}`),H=n(()=>{const{length:a,width:p,height:m}=f.dimensions,y=m<Math.min(a,p)*.3,r=m>Math.max(a,p)*1.5,D=Math.abs(a-p)<Math.max(a,p)*.2;return y?"flat":r?"tall":D?"square":"rectangular"}),h=n(()=>{switch(H.value){case"flat":return{front:{start:"#fff8e1",middle:"#ffeb3b",end:"#ff8f00"},right:{start:"#ff8f00",middle:"#f57c00",end:"#e65100"},top:{start:"#fff9c4",middle:"#ffeb3b",end:"#ffa000"},stroke:"#e65100"};case"tall":return{front:{start:"#e8f5e8",middle:"#66bb6a",end:"#2e7d32"},right:{start:"#2e7d32",middle:"#1b5e20",end:"#0d3818"},top:{start:"#f1f8e9",middle:"#8bc34a",end:"#689f38"},stroke:"#1b5e20"};case"square":return{front:{start:"#fce4ec",middle:"#e91e63",end:"#ad1457"},right:{start:"#ad1457",middle:"#880e4f",end:"#4a0e4e"},top:{start:"#f8bbd9",middle:"#e91e63",end:"#c2185b"},stroke:"#880e4f"};default:return{front:{start:"#e3f2fd",middle:"#42a5f5",end:"#1565c0"},right:{start:"#1565c0",middle:"#0d47a1",end:"#002171"},top:{start:"#f3e5f5",middle:"#ba68c8",end:"#7b1fa2"},stroke:"#0d47a1"}}});function z(a,p=3){if(!a||a.length<3)return"";let m="";for(let y=0;y<a.length;y++){const r=a[y],D=a[(y+1)%a.length],k=a[(y-1+a.length)%a.length];if(y===0){const j=r.x-k.x,R=r.y-k.y,G=Math.hypot(j,R);if(G>p*2){const O=j/G,V=R/G;m+=`M ${r.x-O*p} ${r.y-V*p}`}else m+=`M ${r.x} ${r.y}`}const B=r.x-k.x,J=r.y-k.y,Q=D.x-r.x,X=D.y-r.y,E=Math.hypot(B,J),N=Math.hypot(Q,X);if(E>0&&N>0){const j=B/E,R=J/E,G=Q/N,O=X/N,V=Math.min(p,E/2,N/2),ne=r.x-j*V,le=r.y-R*V,ie=r.x+G*V,ae=r.y+O*V;m+=` L ${ne} ${le}`,m+=` Q ${r.x} ${r.y} ${ie} ${ae}`}else m+=` L ${r.x} ${r.y}`}return m+=" Z",m}return(a,p)=>(P(),T("svg",ce(a.$attrs,{viewBox:A.value,preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",class:"block"}),[e("defs",null,[e("linearGradient",{id:`frontGradient-${d(l)}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":h.value.front.start},null,8,ke),e("stop",{offset:"50%","stop-color":h.value.front.middle},null,8,$e),e("stop",{offset:"100%","stop-color":h.value.front.end},null,8,Me)],8,we),e("linearGradient",{id:`rightGradient-${d(l)}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":h.value.right.start},null,8,Se),e("stop",{offset:"50%","stop-color":h.value.right.middle},null,8,ze),e("stop",{offset:"100%","stop-color":h.value.right.end},null,8,De)],8,qe),e("linearGradient",{id:`topGradient-${d(l)}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":h.value.top.start},null,8,Ce),e("stop",{offset:"50%","stop-color":h.value.top.middle},null,8,Le),e("stop",{offset:"100%","stop-color":h.value.top.end},null,8,Fe)],8,Ve),e("linearGradient",{id:`shadowGradient-${d(l)}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[...p[0]||(p[0]=[e("stop",{offset:"0%","stop-color":"rgba(0,0,0,0.25)"},null,-1),e("stop",{offset:"50%","stop-color":"rgba(0,0,0,0.15)"},null,-1),e("stop",{offset:"100%","stop-color":"rgba(0,0,0,0.05)"},null,-1)])],8,Ge),e("filter",{id:`shadowBlur-${d(l)}`,x:"-50%",y:"-50%",width:"200%",height:"200%"},[...p[1]||(p[1]=[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"},null,-1)])],8,Pe)]),e("path",{d:z(F.value,2),fill:`url(#shadowGradient-${d(l)})`,filter:`url(#shadowBlur-${d(l)})`,opacity:Ye},null,8,Ae),e("path",{d:z(I.value,4),fill:`url(#frontGradient-${d(l)})`,stroke:h.value.stroke,"stroke-width":"1.2","stroke-linejoin":"round","stroke-linecap":"round"},null,8,Be),e("path",{d:z(i.value,4),fill:`url(#rightGradient-${d(l)})`,stroke:h.value.stroke,"stroke-width":"1.2","stroke-linejoin":"round","stroke-linecap":"round"},null,8,Ee),e("path",{d:z(s.value,4),fill:`url(#topGradient-${d(l)})`,stroke:h.value.stroke,"stroke-width":"1.2","stroke-linejoin":"round","stroke-linecap":"round"},null,8,Ne),e("g",je,[e("line",{x1:0,y1:0,x2:o.value,y2:0},null,8,Re),e("line",{x1:o.value,y1:0,x2:o.value+c.value,y2:-u.value},null,8,Te),e("line",{x1:0,y1:0,x2:c.value,y2:-u.value},null,8,Ie),e("line",{x1:0,y1:0,x2:0,y2:t.value},null,8,Ke),e("line",{x1:o.value,y1:0,x2:o.value,y2:t.value},null,8,He),e("line",{x1:o.value+c.value,y1:-u.value,x2:o.value+c.value,y2:t.value-u.value},null,8,Oe)]),a.showDimensions?(P(),T(ue,{key:0},[e("text",{x:o.value/2,y:t.value+15,"text-anchor":"middle",class:"fill-gray-700",style:{font:"600 10px system-ui"}},x(a.dimensions.length)+"cm ",9,Ue),e("text",{x:o.value+c.value/2,y:t.value-u.value/2+5,"text-anchor":"middle",class:"fill-gray-700",style:{font:"600 10px system-ui"},transform:`rotate(-25 ${o.value+c.value/2} ${t.value-u.value/2+5})`},x(a.dimensions.width)+"cm ",9,We),e("text",{x:-15,y:t.value/2,"text-anchor":"middle",class:"fill-gray-700",style:{font:"600 10px system-ui"},transform:`rotate(-90 -15 ${t.value/2})`},x(a.dimensions.height)+"cm ",9,Je)],64)):se("",!0)],16,be))}}),et={key:0,class:"fixed inset-0 z-50"},tt={class:"absolute inset-0 flex items-center justify-center p-4"},st={class:"w-[380px] max-w-full rounded-2xl bg-white shadow-2xl ring-1 ring-black/5 overflow-hidden"},ot={class:"relative px-4 pt-4 pb-3"},nt={class:"flex items-start justify-between"},lt={class:"flex items-center gap-2"},it={class:"px-4 pb-4 space-y-4"},at={class:"grid grid-cols-2 gap-4 relative"},rt={class:"space-y-0.5"},dt={class:"flex items-center gap-1.5 text-blue-600 font-medium text-xs"},ct={class:"font-semibold text-sm"},ut={class:"text-xs text-gray-500"},pt={class:"space-y-0.5 text-right"},ft={class:"flex items-center justify-end gap-1.5 text-green-600 font-medium text-xs"},ht={class:"font-semibold text-sm"},mt={class:"text-xs text-gray-500"},xt={class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-300"},vt={class:"grid grid-cols-2 gap-4"},gt={class:"text-center"},yt={class:"text-2xl font-bold text-blue-600"},_t={class:"text-center"},bt={class:"text-2xl font-bold text-purple-600"},wt={class:"border rounded-lg p-3 grid grid-cols-[1fr,90px] gap-4 items-center bg-gray-50"},kt={class:"space-y-0.5"},$t={class:"text-xs text-gray-600"},Mt={class:"text-xs flex items-center gap-1"},qt={class:"inline-flex items-center gap-1 text-orange-700"},St={class:"text-gray-500"},zt={class:"h-16 w-full rounded-md relative overflow-hidden bg-gradient-to-br from-indigo-50 to-purple-100 border border-indigo-200"},Dt={class:"text-center"},Vt={class:"flex items-center justify-center gap-1.5 text-red-600"},Ct={class:"font-semibold text-sm"},Lt={class:"rounded-lg bg-green-50 px-3 py-3 text-center border border-green-100"},Ft={class:"text-2xl font-bold text-green-700"},Gt={class:"px-4 pb-4 pt-2 flex items-center gap-2"},Pt=["disabled"],At=W({__name:"NewPickupRequestModal",props:{modelValue:{type:Boolean},request:{}},emits:["update:modelValue","accept","decline","expired","close"],setup(q,{emit:f}){const l=q,g=f,v=U(0),b=n(()=>v.value<=0),S=n(()=>{const i=Math.max(0,v.value),s=Math.floor(i/60),F=i%60;return`${s}:${F.toString().padStart(2,"0")}`});n(()=>{const i=l.request.expiresInSeconds||1,s=Math.max(0,v.value);return Math.min(100,Math.max(0,s/i*100))});let $;function L(i){v.value=i,o(),$=window.setInterval(()=>{v.value-=1,v.value<=0&&(o(),g("expired",l.request))},1e3)}function o(){$&&(clearInterval($),$=void 0)}pe(()=>l.modelValue,i=>{i?L(l.request.expiresInSeconds):o()},{immediate:!0}),oe(o);function M(){g("update:modelValue",!1),g("close")}function t(){g("accept",l.request),g("update:modelValue",!1)}function c(){g("decline",l.request),g("update:modelValue",!1)}n(()=>{switch(l.request.priority){case"urgent":return"bg-red-50 text-red-700 border border-red-100";case"express":return"bg-orange-50 text-orange-700 border border-orange-100";default:return"bg-blue-50 text-blue-700 border border-blue-100"}}),n(()=>{switch(l.request.priority){case"urgent":return"bg-red-500";case"express":return"bg-orange-500";default:return"bg-blue-500"}});const u=n(()=>{const s=String(l.request.dimensions||"20x15x10 cm").trim().replace(/,(?=\d)/g,"."),F=/(\d+(?:\.\d+)?)\s*(cm|mm|m|in|inch|inches)?\s*[x×]\s*(\d+(?:\.\d+)?)\s*(cm|mm|m|in|inch|inches)?\s*[x×]\s*(\d+(?:\.\d+)?)\s*(cm|mm|m|in|inch|inches)?/i,w=s.match(F);if(w){const K=parseFloat(w[1]),A=(w[2]||"").toLowerCase(),H=parseFloat(w[3]),h=(w[4]||"").toLowerCase(),z=parseFloat(w[5]),a=(w[6]||"").toLowerCase(),p=(k,B)=>{switch(B){case"mm":return k/10;case"m":return k*100;case"in":case"inch":case"inches":return k*2.54;case"cm":default:return k}},m=a||h||A||"cm",y=p(K,A||m),r=p(H,h||m),D=p(z,a||m);return{length:y,width:r,height:D}}return{length:20,width:15,height:10}}),I=n(()=>u.value);return(i,s)=>(P(),fe(xe,{to:"body"},[i.modelValue?(P(),T("div",et,[e("div",{class:"absolute inset-0 bg-black/40",onClick:M}),e("div",tt,[e("section",st,[e("header",ot,[e("div",nt,[s[1]||(s[1]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"h-2 w-2 rounded-full bg-blue-500"}),e("h3",{class:"text-base font-semibold"},"New Pickup Request")],-1)),e("div",lt,[s[0]||(s[0]=e("span",{class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-orange-50 text-orange-700 border border-orange-100"},[e("span",{class:"h-1 w-1 rounded-full bg-orange-500"}),Y(" standard ")],-1)),e("button",{class:"h-5 w-5 grid place-items-center rounded hover:bg-gray-50","aria-label":"Close",onClick:M},[_(d(Z),{class:"w-3 h-3"})])])]),s[2]||(s[2]=e("p",{class:"text-xs text-gray-500 mt-1"},"A new delivery opportunity is available in your area",-1))]),e("div",it,[e("div",at,[e("div",rt,[e("div",dt,[_(d(he),{class:"w-3.5 h-3.5"}),s[3]||(s[3]=e("span",null,"Pickup from:",-1))]),e("div",ct,x(i.request.pickup.name),1),e("div",ut,x(i.request.pickup.address),1)]),e("div",pt,[e("div",ft,[s[4]||(s[4]=e("span",null,"Deliver to:",-1)),_(d(me),{class:"w-3.5 h-3.5"})]),e("div",ht,x(i.request.dropoff.name),1),e("div",mt,x(i.request.dropoff.address),1)]),e("div",xt,[_(d(_e),{class:"w-3.5 h-3.5"})])]),e("div",vt,[e("div",gt,[e("div",yt,x(i.request.etaMinutes)+" min",1),s[5]||(s[5]=e("div",{class:"text-xs text-gray-500"},"Estimated Time",-1))]),e("div",_t,[e("div",bt,x(i.request.distanceKm.toFixed(1))+" km",1),s[6]||(s[6]=e("div",{class:"text-xs text-gray-500"},"Distance",-1))])]),e("div",wt,[e("div",kt,[s[8]||(s[8]=e("div",{class:"font-semibold text-sm"},"Package Details",-1)),e("div",$t,x(i.request.dimensions),1),e("div",Mt,[e("span",qt,[s[7]||(s[7]=e("span",{class:"h-1 w-1 rounded-full bg-orange-600"},null,-1)),Y(" "+x(i.request.weightKg.toFixed(1))+"kg ",1)]),e("span",St,"Volume "+x(i.request.volumeL.toFixed(0))+"L",1)])]),e("div",zt,[_(Ze,{class:"w-full h-full",dimensions:I.value,"show-dimensions":!1,size:"small"},null,8,["dimensions"])])]),e("div",Dt,[e("div",Vt,[_(d(ye),{class:"w-3.5 h-3.5"}),e("span",Ct,"Expires in "+x(S.value),1)])]),e("div",Lt,[e("div",Ft,x(i.request.feeKr)+" kr",1),s[9]||(s[9]=e("div",{class:"text-xs text-green-600"},"delivery fee",-1))])]),e("footer",Gt,[e("button",{class:"h-10 px-4 rounded-lg border bg-white hover:bg-gray-50 flex-1 flex items-center justify-center gap-1.5 font-medium text-gray-700",onClick:c},[_(d(Z),{class:"w-3.5 h-3.5"}),s[10]||(s[10]=e("span",null,"Decline",-1))]),e("button",{class:"h-10 px-4 rounded-lg bg-green-600 text-white hover:bg-green-700 flex-1 disabled:opacity-60 flex items-center justify-center gap-1.5 font-medium",disabled:b.value,onClick:t},[_(d(ge),{class:"w-3.5 h-3.5"}),s[11]||(s[11]=e("span",null,"Accept",-1))],8,Pt)])])])])):se("",!0)]))}}),ee="new-pickup-request";function Bt(q){const f=l=>{q(l.detail)};return window.addEventListener(ee,f),()=>window.removeEventListener(ee,f)}const Et={class:"space-y-4"},Ht=W({__name:"ActiveDeliveriesView",setup(q){const{future:f,loading:l,error:g,loadFuture:v}=re(),b=U(!1),S=U({priority:"standard",pickup:{name:"",address:""},dropoff:{name:"",address:""},etaMinutes:0,distanceKm:0,dimensions:"",weightKg:0,volumeL:0,feeKr:0,expiresInSeconds:0}),$=Bt(t=>{S.value=t,b.value=!0});oe(()=>$()),ve(()=>{v()});function L(t){console.log("Accepted pickup",t)}function o(t){console.log("Declined pickup",t)}function M(t){console.log("Pickup expired",t)}return(t,c)=>(P(),T("section",Et,[c[1]||(c[1]=e("h2",{class:"text-2xl font-semibold"},"Active Deliveries",-1)),_(de,{items:d(f)||[],loading:d(l),error:d(g),showFullView:!0,enableActions:!0,onRefresh:d(v)},null,8,["items","loading","error","onRefresh"]),_(At,{modelValue:b.value,"onUpdate:modelValue":c[0]||(c[0]=u=>b.value=u),request:S.value,onAccept:L,onDecline:o,onExpired:M},null,8,["modelValue","request"])]))}});export{Ht as default};
